<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chaey Golden - Smart Home</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        
        .pulse-animate {
            animation: pulse 2s infinite;
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .search-input:focus {
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .category-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .dark .category-badge {
            background: linear-gradient(135deg, #4f46e5 0%, #7c3aed 100%);
        }
        
        .spinner {
            border: 3px solid #f3f4f6;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @media (max-width: 640px) {
            .touch-friendly {
                min-height: 60px;
                font-size: 16px;
            }
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
    <!-- Header -->
    <header class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-gray-900 dark:text-white">
                        <i class="fas fa-home mr-2 text-blue-600"></i>
                        Chaey Golden
                    </h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="darkModeToggle" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors">
                        <i class="fas fa-moon dark:hidden"></i>
                        <i class="fas fa-sun hidden dark:block"></i>
                    </button>
                    <button id="refreshBtn" class="p-2 rounded-lg bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800 transition-colors">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Stats and Controls -->
        <div class="mb-8">
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm p-6 border border-gray-200 dark:border-gray-700">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                    <div class="flex items-center">
                        <div class="flex items-center bg-blue-100 dark:bg-blue-900 rounded-lg px-3 py-2">
                            <i class="fas fa-file-code text-blue-600 dark:text-blue-400 mr-2"></i>
                            <span class="text-sm font-medium text-blue-700 dark:text-blue-300">
                                <span id="fileCount">0</span> HTML 파일
                            </span>
                        </div>
                        <div class="ml-4 text-sm text-gray-500 dark:text-gray-400">
                            <i class="fas fa-clock mr-1"></i>
                            마지막 업데이트: <span id="lastUpdate">-</span>
                        </div>
                    </div>
                    
                    <div class="flex flex-col sm:flex-row gap-3">
                        <!-- Search -->
                        <div class="relative">
                            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                            <input 
                                type="text" 
                                id="searchInput" 
                                placeholder="파일 검색..." 
                                class="search-input pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-64"
                            >
                        </div>
                        
                        <!-- Sort -->
                        <select id="sortSelect" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="name">이름순</option>
                            <option value="modified">수정일순</option>
                            <option value="size">크기순</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="text-center py-12">
            <div class="spinner mx-auto mb-4"></div>
            <p class="text-gray-600 dark:text-gray-400">GitHub 저장소에서 HTML 파일을 불러오는 중...</p>
        </div>

        <!-- Error State -->
        <div id="errorState" class="hidden text-center py-12">
            <div class="bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-8">
                <i class="fas fa-exclamation-triangle text-red-500 text-4xl mb-4"></i>
                <h3 class="text-lg font-semibold text-red-700 dark:text-red-400 mb-2">파일을 불러올 수 없습니다</h3>
                <p class="text-red-600 dark:text-red-300 mb-4" id="errorMessage"></p>
                <button id="retryBtn" class="bg-red-500 hover:bg-red-600 text-white px-6 py-2 rounded-lg transition-colors">
                    <i class="fas fa-redo mr-2"></i>다시 시도
                </button>
            </div>
        </div>

        <!-- No Files State -->
        <div id="noFilesState" class="hidden text-center py-12">
            <div class="bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-8">
                <i class="fas fa-folder-open text-gray-400 text-4xl mb-4"></i>
                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2">HTML 파일이 없습니다</h3>
                <p class="text-gray-600 dark:text-gray-400">저장소에 HTML 파일을 추가해보세요!</p>
            </div>
        </div>

        <!-- Files Grid -->
        <div id="filesGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 hidden">
            <!-- Files will be dynamically inserted here -->
        </div>
    </main>

    <script>
        class SmartHome {
            constructor() {
                this.owner = 'nadleh';
                this.repo = 'chaey-golden';
                this.apiUrl = `https://api.github.com/repos/${this.owner}/${this.repo}/contents`;
                this.files = [];
                this.filteredFiles = [];
                this.cache = this.loadFromCache();
                
                this.init();
            }
            
            init() {
                this.setupEventListeners();
                this.setupDarkMode();
                this.loadFiles();
            }
            
            setupEventListeners() {
                document.getElementById('searchInput').addEventListener('input', (e) => {
                    this.filterFiles(e.target.value);
                });
                
                document.getElementById('sortSelect').addEventListener('change', (e) => {
                    this.sortFiles(e.target.value);
                });
                
                document.getElementById('refreshBtn').addEventListener('click', () => {
                    this.loadFiles(true);
                });
                
                document.getElementById('retryBtn').addEventListener('click', () => {
                    this.loadFiles(true);
                });
                
                document.getElementById('darkModeToggle').addEventListener('click', () => {
                    this.toggleDarkMode();
                });
            }
            
            setupDarkMode() {
                const isDark = localStorage.getItem('darkMode') === 'true' || 
                             (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches);
                
                if (isDark) {
                    document.documentElement.classList.add('dark');
                }
            }
            
            toggleDarkMode() {
                const isDark = document.documentElement.classList.toggle('dark');
                localStorage.setItem('darkMode', isDark);
            }
            
            async loadFiles(forceRefresh = false) {
                this.showLoading();
                
                try {
                    // Check cache first
                    if (!forceRefresh && this.cache && this.cache.timestamp && 
                        Date.now() - this.cache.timestamp < 5 * 60 * 1000) { // 5 minutes cache
                        this.files = this.cache.files;
                        this.processFiles();
                        return;
                    }
                    
                    const response = await fetch(this.apiUrl);
                    
                    if (!response.ok) {
                        throw new Error(`GitHub API 오류: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    
                    // Filter HTML files
                    this.files = data
                        .filter(file => file.type === 'file' && file.name.endsWith('.html'))
                        .map(file => ({
                            name: file.name,
                            path: file.path,
                            size: file.size,
                            url: `https://${this.owner}.github.io/${this.repo}/${file.name}`,
                            downloadUrl: file.download_url,
                            lastModified: new Date(file.sha), // Using SHA as proxy for last modified
                            category: this.categorizeFile(file.name),
                            icon: this.getFileIcon(file.name)
                        }));
                    
                    // Save to cache
                    this.saveToCache(this.files);
                    
                    this.processFiles();
                    
                } catch (error) {
                    this.showError(error.message);
                }
            }
            
            processFiles() {
                this.filteredFiles = [...this.files];
                this.sortFiles(document.getElementById('sortSelect').value);
                this.updateStats();
                this.renderFiles();
                this.hideLoading();
            }
            
            categorizeFile(filename) {
                const name = filename.toLowerCase();
                
                if (name.includes('game') || name.includes('interactive') || name.includes('rhythm')) return 'Game';
                if (name.includes('family') || name.includes('관계')) return 'Family';
                if (name.includes('fitness') || name.includes('health') || name.includes('운동')) return 'Health';
                if (name.includes('morning') || name.includes('routine')) return 'Lifestyle';
                if (name.includes('spell') || name.includes('study') || name.includes('learn')) return 'Education';
                if (name.includes('egypt') || name.includes('history')) return 'History';
                if (name.includes('노래') || name.includes('music') || name.includes('song')) return 'Music';
                
                return 'General';
            }
            
            getFileIcon(filename) {
                const category = this.categorizeFile(filename);
                
                const icons = {
                    'Game': 'fas fa-gamepad',
                    'Family': 'fas fa-users',
                    'Health': 'fas fa-dumbbell',
                    'Lifestyle': 'fas fa-sun',
                    'Education': 'fas fa-book',
                    'History': 'fas fa-landmark',
                    'Music': 'fas fa-music',
                    'General': 'fas fa-file-code'
                };
                
                return icons[category] || 'fas fa-file-code';
            }
            
            getCategoryColor(category) {
                const colors = {
                    'Game': 'bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200',
                    'Family': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200',
                    'Health': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200',
                    'Lifestyle': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200',
                    'Education': 'bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200',
                    'History': 'bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-200',
                    'Music': 'bg-pink-100 text-pink-800 dark:bg-pink-900 dark:text-pink-200',
                    'General': 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200'
                };
                
                return colors[category] || colors['General'];
            }
            
            filterFiles(query) {
                if (!query) {
                    this.filteredFiles = [...this.files];
                } else {
                    this.filteredFiles = this.files.filter(file => 
                        file.name.toLowerCase().includes(query.toLowerCase()) ||
                        file.category.toLowerCase().includes(query.toLowerCase())
                    );
                }
                this.renderFiles();
            }
            
            sortFiles(sortBy) {
                this.filteredFiles.sort((a, b) => {
                    switch (sortBy) {
                        case 'name':
                            return a.name.localeCompare(b.name);
                        case 'modified':
                            return b.lastModified - a.lastModified;
                        case 'size':
                            return b.size - a.size;
                        default:
                            return 0;
                    }
                });
                this.renderFiles();
            }
            
            formatFileSize(bytes) {
                if (bytes === 0) return '0 B';
                const k = 1024;
                const sizes = ['B', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
            }
            
            renderFiles() {
                const grid = document.getElementById('filesGrid');
                
                if (this.filteredFiles.length === 0) {
                    this.showNoFiles();
                    return;
                }
                
                grid.innerHTML = this.filteredFiles.map(file => `
                    <div class="card-hover bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden fade-in touch-friendly">
                        <div class="p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex items-center">
                                    <div class="w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mr-3">
                                        <i class="${file.icon} text-blue-600 dark:text-blue-400 text-lg"></i>
                                    </div>
                                    <div>
                                        <h3 class="font-semibold text-gray-900 dark:text-white text-sm sm:text-base truncate max-w-32 sm:max-w-none">
                                            ${file.name.replace('.html', '')}
                                        </h3>
                                        <span class="inline-block px-2 py-1 rounded-full text-xs font-medium ${this.getCategoryColor(file.category)} mt-1">
                                            ${file.category}
                                        </span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="space-y-2 text-xs text-gray-500 dark:text-gray-400 mb-4">
                                <div class="flex items-center">
                                    <i class="fas fa-weight-hanging w-4"></i>
                                    <span class="ml-2">${this.formatFileSize(file.size)}</span>
                                </div>
                            </div>
                            
                            <div class="flex gap-2">
                                <a href="${file.url}" 
                                   target="_blank" 
                                   class="flex-1 bg-blue-600 hover:bg-blue-700 text-white text-center py-2 px-4 rounded-lg transition-colors text-sm font-medium touch-friendly">
                                    <i class="fas fa-external-link-alt mr-2"></i>열기
                                </a>
                                <a href="${file.downloadUrl}" 
                                   target="_blank" 
                                   class="bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 p-2 rounded-lg transition-colors">
                                    <i class="fas fa-download"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                `).join('');
                
                this.showFiles();
            }
            
            updateStats() {
                document.getElementById('fileCount').textContent = this.files.length;
                document.getElementById('lastUpdate').textContent = new Date().toLocaleString('ko-KR');
            }
            
            showLoading() {
                document.getElementById('loadingState').classList.remove('hidden');
                document.getElementById('errorState').classList.add('hidden');
                document.getElementById('noFilesState').classList.add('hidden');
                document.getElementById('filesGrid').classList.add('hidden');
            }
            
            hideLoading() {
                document.getElementById('loadingState').classList.add('hidden');
            }
            
            showError(message) {
                document.getElementById('errorMessage').textContent = message;
                document.getElementById('errorState').classList.remove('hidden');
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('noFilesState').classList.add('hidden');
                document.getElementById('filesGrid').classList.add('hidden');
            }
            
            showNoFiles() {
                document.getElementById('noFilesState').classList.remove('hidden');
                document.getElementById('errorState').classList.add('hidden');
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('filesGrid').classList.add('hidden');
            }
            
            showFiles() {
                document.getElementById('filesGrid').classList.remove('hidden');
                document.getElementById('errorState').classList.add('hidden');
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('noFilesState').classList.add('hidden');
            }
            
            loadFromCache() {
                try {
                    const cached = localStorage.getItem('chaey-golden-files');
                    return cached ? JSON.parse(cached) : null;
                } catch {
                    return null;
                }
            }
            
            saveToCache(files) {
                try {
                    localStorage.setItem('chaey-golden-files', JSON.stringify({
                        files,
                        timestamp: Date.now()
                    }));
                } catch {
                    // Cache storage failed, continue without caching
                }
            }
        }
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', () => {
            new SmartHome();
        });
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDsos%2FZnRoWx4%2BduynftZ8YS2lBtc1gPBo7Tif8Zn8%2Bolm1OPixHiJGL7ZuTCvSD9XyLckBnNQH6Jwsn1Yep2J%2FaDyXhZfKxvXiJVX5daM4GJ8YeyhXIDmtyAP9JONcgAWLF9rz3yrNf8JFrbnxVWbRM0kXwp83u7pIZYjVZqugixWlk8LYFlX05A2sMONmfN8u4lA32MUHiMTDuGkV9Me021VXTD70PeJaAJGJyLqfL5hyDycOkdhetT9DCEXZXmW6CxERpuaSt7HWos3vmRJEKA6VoqLZGo%2BU%2Bz%2B3WRtZ0xs1J0UPu3mcoYpuAYEKnmW8U4vdSq0hz41%2FBNs30xPbedI7Y9wQSIAyWWi9Jjc0Y0ZEl%2BcSPCWj4qCp2tbli%2BMhofrFhZjW0iJRAVYhBvXHRr7T1Vba%2B0opM%2BcmGZxlzeo14RIr85CGCRqj%2Fo5IQom9c9GZuiEFNivERB2NHSmLFZXKgUcRTguoRCUFzVhpeOEUcnSokBsmYn4oFkvobpzg%3D%3D";
        window.__genspark_locale = "ko-KR";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDsos/ZnRoWx4+duynftZ8YS2lBtc1gPBo7Tif8Zn8+olm1OPixHiJGL7ZuTCvSD9XyLckBnNQH6Jwsn1Yep2J/aDyXhZfKxvXiJVX5daM4GJ8YeyhXIDmtyAP9JONcgAWLF9rz3yrNf8JFrbnxVWbRM0kXwp83u7pIZYjVZqugixWlk8LYFlX05A2sMONmfN8u4lA32MUHiMTDuGkV9Me021VXTD70PeJaAJGJyLqfL5hyDycOkdhetT9DCEXZXmW6CxERpuaSt7HWos3vmRJEKA6VoqLZGo+U+z+3WRtZ0xs1J0UPu3mcoYpuAYEKnmW8U4vdSq0hz41/BNs30xPbedI7Y9wQSIAyWWi9Jjc0Y0ZEl+cSPCWj4qCp2tbli+MhofrFhZjW0iJRAVYhBvXHRr7T1Vba+0opM+cmGZxlzeo14RIr85CGCRqj/o5IQom9c9GZuiEFNivERB2NHSmLFZXKgUcRTguoRCUFzVhpeOEUcnSokBsmYn4oFkvobpzg==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
