<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒŸ ìŠ¤í ë§ ë§ˆìŠ¤í„° ê²Œì„</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Quicksand', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .title {
            font-size: 24px;
            color: #6a1b9a;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .sticker-info {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .sticker-count {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .draw-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .draw-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .draw-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        
        .game-buttons {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: nowrap;
        }
        
        .game-btn {
            flex: 1;
            min-width: 0;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 12px 6px;
            border-radius: 15px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            text-align: center;
            line-height: 1.2;
        }
        
        .game-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .word-list {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .word-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 4px;
            border-radius: 10px;
            text-align: center;
            font-size: 10px;
            color: #6a1b9a;
            backdrop-filter: blur(5px);
        }
        
        .game-screen {
            display: none;
            text-align: center;
        }
        
        .game-screen.active {
            display: block;
        }
        
        .back-button {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            font-size: 14px;
            cursor: pointer;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .cards-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .card:hover {
            transform: scale(1.05);
        }
        
        .card.flipped {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            color: #333;
            border: 2px solid #2196F3;
        }
        
        .card.matched {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            border: 3px solid #FFD700;
            color: white;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .fill-blank-container {
            text-align: center;
            padding: 20px;
        }
        
        .korean-meaning {
            font-size: 20px;
            color: #6a1b9a;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .word-with-blank {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
            font-weight: 700;
        }
        
        .letter-options {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .letter-btn {
            background: linear-gradient(135deg, #ff7675, #fd79a8);
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .letter-btn:hover {
            transform: translateY(-2px);
        }
        
        .progress-info {
            margin-top: 20px;
            font-size: 16px;
            color: #6a1b9a;
        }
        
        .completion-screen {
            display: none;
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .completion-screen.active {
            display: block;
        }
        
        .restart-button {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 15px;
            font-size: 14px;
            cursor: pointer;
            margin: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .draw-result {
            display: none;
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            margin: 20px 0;
            backdrop-filter: blur(10px);
        }
        
        .draw-result.active {
            display: block;
        }
        
        .reward-animation {
            font-size: 60px;
            margin: 20px 0;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-30px);
            }
            60% {
                transform: translateY(-15px);
            }
        }
        
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }
        
        .particle {
            position: absolute;
            background: #FFD700;
            border-radius: 50%;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="floating-particles" id="particles"></div>
    
    <div class="container">
        <div class="header">
            <div class="title">ğŸŒŸ ìŠ¤í ë§ ë§ˆìŠ¤í„° ê²Œì„</div>
            <div class="sticker-info">
                <div class="sticker-count">â­ ìŠ¤í‹°ì»¤: <span id="stickerCount">0</span>ê°œ</div>
                <button class="draw-button" id="drawButton" disabled>ğŸ° ë½‘ê¸° (5ê°œ)</button>
            </div>
        </div>
        
        <div id="mainScreen">
            <div class="game-buttons">
                <button class="game-btn" onclick="startMemoryGame()">ğŸ´ ë©”ëª¨ë¦¬ ì¹´ë“œ</button>
                <button class="game-btn" onclick="startPictureGame()">ğŸ–¼ï¸ ê·¸ë¦¼ ë§¤ì¹­</button>
                <button class="game-btn" onclick="startFillBlankGame()">âœï¸ ë¹ˆì¹¸ ì±„ìš°ê¸°</button>
            </div>
            
            <div class="word-list" id="wordList"></div>
        </div>
        
        <div id="memoryGameScreen" class="game-screen">
            <button class="back-button" onclick="backToMain()">â† ëŒì•„ê°€ê¸°</button>
            <h3>ğŸ´ ë©”ëª¨ë¦¬ ì¹´ë“œ ê²Œì„</h3>
            <p>ë§¤ì¹­: <span id="memoryMatching">0/6</span></p>
            <div class="cards-container" id="memoryCards"></div>
            <div class="completion-screen" id="memoryCompletion">
                <h3>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰</h3>
                <p>ë©”ëª¨ë¦¬ ì¹´ë“œ ê²Œì„ ì™„ë£Œ!</p>
                <p>â­ ìŠ¤í‹°ì»¤ 3ê°œ íšë“! â­</p>
                <button class="restart-button" onclick="startMemoryGame()">ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
                <button class="restart-button" onclick="backToMain()">ğŸ  ë©”ë‰´ë¡œ</button>
            </div>
        </div>
        
        <div id="pictureGameScreen" class="game-screen">
            <button class="back-button" onclick="backToMain()">â† ëŒì•„ê°€ê¸°</button>
            <h3>ğŸ–¼ï¸ ê·¸ë¦¼ ë§¤ì¹­ ê²Œì„</h3>
            <p>ë§¤ì¹­: <span id="pictureMatching">0/6</span></p>
            <div class="cards-container" id="pictureCards"></div>
            <div class="completion-screen" id="pictureCompletion">
                <h3>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰</h3>
                <p>ê·¸ë¦¼ ë§¤ì¹­ ê²Œì„ ì™„ë£Œ!</p>
                <p>â­ ìŠ¤í‹°ì»¤ 5ê°œ íšë“! â­</p>
                <button class="restart-button" onclick="startPictureGame()">ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
                <button class="restart-button" onclick="backToMain()">ğŸ  ë©”ë‰´ë¡œ</button>
            </div>
        </div>
        
        <div id="fillBlankScreen" class="game-screen">
            <button class="back-button" onclick="backToMain()">â† ëŒì•„ê°€ê¸°</button>
            <h3>âœï¸ ë¹ˆì¹¸ ì±„ìš°ê¸° ê²Œì„</h3>
            <div class="fill-blank-container">
                <div class="korean-meaning" id="koreanMeaning"></div>
                <div class="word-with-blank" id="wordWithBlank"></div>
                <div class="letter-options" id="letterOptions"></div>
                <div class="progress-info">ë¬¸ì œ <span id="currentQuestion">1</span>/5</div>
            </div>
            <div class="completion-screen" id="fillBlankCompletion">
                <h3>ğŸ‰ ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰</h3>
                <p>ë¹ˆì¹¸ ì±„ìš°ê¸° ì™„ë£Œ!</p>
                <p>â­ ìŠ¤í‹°ì»¤ 5ê°œ íšë“! â­</p>
                <button class="restart-button" onclick="startFillBlankGame()">ğŸ”„ ë‹¤ì‹œ ì‹œì‘</button>
                <button class="restart-button" onclick="backToMain()">ğŸ  ë©”ë‰´ë¡œ</button>
            </div>
        </div>
        
        <div class="draw-result" id="drawResult">
            <h3>ğŸ° ë½‘ê¸° ê²°ê³¼</h3>
            <div class="reward-animation" id="rewardIcon"></div>
            <div id="rewardMessage"></div>
            <button class="restart-button" onclick="closeDraw()">í™•ì¸</button>
        </div>
    </div>

    <script>
        // ê²Œì„ ë°ì´í„°
        const words = [
            {english: 'dig', korean: 'íŒŒë‹¤'},
            {english: 'hot', korean: 'ëœ¨ê±°ìš´'},
            {english: 'jam', korean: 'ì¼'},
            {english: 'kid', korean: 'ì•„ì´'},
            {english: 'leg', korean: 'ë‹¤ë¦¬'},
            {english: 'map', korean: 'ì§€ë„'},
            {english: 'nut', korean: 'ê²¬ê³¼ë¥˜'},
            {english: 'red', korean: 'ë¹¨ê°„ìƒ‰'},
            {english: 'six', korean: 'ì—¬ì„¯'},
            {english: 'top', korean: 'ìœ„ìª½'},
            {english: 'tub', korean: 'ìš•ì¡°'},
            {english: 'wet', korean: 'ì –ì€'},
            {english: 'bake', korean: 'êµ½ë‹¤'},
            {english: 'cone', korean: 'ì½˜'},
            {english: 'cute', korean: 'ê·€ì—¬ìš´'},
            {english: 'five', korean: 'ë‹¤ì„¯'},
            {english: 'game', korean: 'ê²Œì„'},
            {english: 'home', korean: 'ì§‘'},
            {english: 'mule', korean: 'ë…¸ìƒˆ'},
            {english: 'ride', korean: 'íƒ€ë‹¤'},
            {english: 'rose', korean: 'ì¥ë¯¸'},
            {english: 'time', korean: 'ì‹œê°„'},
            {english: 'tube', korean: 'íŠœë¸Œ'},
            {english: 'wave', korean: 'íŒŒë„'},
            {english: 'blade', korean: 'ì¹¼ë‚ '},
            {english: 'brave', korean: 'ìš©ê°í•œ'},
            {english: 'drive', korean: 'ìš´ì „í•˜ë‹¤'},
            {english: 'flute', korean: 'í”Œë£¨íŠ¸'},
            {english: 'grape', korean: 'í¬ë„'},
            {english: 'plane', korean: 'ë¹„í–‰ê¸°'},
            {english: 'price', korean: 'ê°€ê²©'},
            {english: 'skate', korean: 'ìŠ¤ì¼€ì´íŠ¸'},
            {english: 'slide', korean: 'ë¯¸ë„ëŸ¼í‹€'},
            {english: 'smile', korean: 'ì›ƒë‹¤'},
            {english: 'snake', korean: 'ë±€'},
            {english: 'space', korean: 'ìš°ì£¼'},
            {english: 'happy', korean: 'í–‰ë³µí•œ'},
            {english: 'robot', korean: 'ë¡œë´‡'},
            {english: 'funny', korean: 'ì¬ë¯¸ìˆëŠ”'},
            {english: 'horse', korean: 'ë§'},
            {english: 'again', korean: 'ë‹¤ì‹œ'},
            {english: 'color', korean: 'ìƒ‰ê¹”'},
            {english: 'quiet', korean: 'ì¡°ìš©í•œ'},
            {english: 'pizza', korean: 'í”¼ì'},
            {english: 'short', korean: 'ì§§ì€'},
            {english: 'water', korean: 'ë¬¼'},
            {english: 'bread', korean: 'ë¹µ'},
            {english: 'share', korean: 'ë‚˜ëˆ„ë‹¤'},
            {english: 'cherry', korean: 'ì²´ë¦¬'},
            {english: 'flower', korean: 'ê½ƒ'},
            {english: 'friend', korean: 'ì¹œêµ¬'},
            {english: 'little', korean: 'ì‘ì€'},
            {english: 'parent', korean: 'ë¶€ëª¨'},
            {english: 'purple', korean: 'ë³´ë¼ìƒ‰'},
            {english: 'yellow', korean: 'ë…¸ë€ìƒ‰'}
        ];

        const pictures = {
            'hot': 'ğŸ”¥', 'cat': 'ğŸ±', 'sun': 'â˜€ï¸', 'tree': 'ğŸŒ³', 'water': 'ğŸ’§',
            'bread': 'ğŸ', 'flower': 'ğŸŒ¸', 'horse': 'ğŸ', 'pizza': 'ğŸ•', 'cherry': 'ğŸ’',
            'robot': 'ğŸ¤–', 'happy': 'ğŸ˜Š', 'smile': 'ğŸ˜Š', 'time': 'â°', 'home': 'ğŸ ',
            'red': 'ğŸ”´', 'game': 'ğŸ®', 'friend': 'ğŸ‘«', 'color': 'ğŸŒˆ', 'space': 'ğŸš€'
        };

        // ê²Œì„ ìƒíƒœ
        let stickers = parseInt(localStorage.getItem('stickers')) || 0;
        let flippedCards = [];
        let matchedPairs = 0;
        let currentGameWords = [];
        let fillBlankQuestions = [];
        let currentFillBlankIndex = 0;

        // ë³´ìƒ ì‹œìŠ¤í…œ
        const rewards = [
            {icon: 'ğŸ“š', message: 'ì ë“¤ê¸° ì „ ì±… í•œ ê¶Œ ì¶”ê°€!', probability: 35},
            {icon: 'ğŸª', message: 'ë§›ìˆëŠ” ê°„ì‹!', probability: 35},
            {icon: 'ğŸ¤—', message: 'ì—„ë§ˆë‘ ì„ì„ì„!', probability: 14},
            {icon: 'ğŸ', message: 'ì•„ë¹  ë§íƒ€ê¸° ë†€ì´!', probability: 15},
            {icon: 'ğŸ§¸', message: 'ğŸ‰ ì­íŒŸ! ì¥ë‚œê° ì‚¬ì£¼ê¸°! ğŸ‰', probability: 0.5}
        ];

        // ì´ˆê¸°í™”
        function init() {
            updateStickerDisplay();
            displayWordList();
            createParticles();
        }

        function updateStickerDisplay() {
            document.getElementById('stickerCount').textContent = stickers;
            const drawButton = document.getElementById('drawButton');
            
            if (stickers >= 5) {
                drawButton.disabled = false;
                drawButton.textContent = 'ğŸ° ë½‘ê¸° (5ê°œ)';
                drawButton.onclick = function() {
                    performDraw();
                };
            } else {
                drawButton.disabled = true;
                drawButton.textContent = `ğŸ° ë½‘ê¸° (${stickers}/5)`;
                drawButton.onclick = null;
            }
        }

        function performDraw() {
            if (stickers < 5) return;
            
            // ìŠ¤í‹°ì»¤ ì°¨ê°
            stickers -= 5;
            localStorage.setItem('stickers', stickers);
            updateStickerDisplay();
            
            // ë³´ìƒ ê²°ì •
            const random = Math.random() * 100;
            let cumulativeProbability = 0;
            let selectedReward = rewards[0]; // ê¸°ë³¸ê°’
            
            for (const reward of rewards) {
                cumulativeProbability += reward.probability;
                if (random <= cumulativeProbability) {
                    selectedReward = reward;
                    break;
                }
            }
            
            // ê²°ê³¼ í‘œì‹œ
            showDrawResult(selectedReward);
            createCelebrationParticles();
        }

        function showDrawResult(reward) {
            document.getElementById('rewardIcon').textContent = reward.icon;
            document.getElementById('rewardMessage').innerHTML = `<h4>${reward.message}</h4>`;
            document.getElementById('drawResult').classList.add('active');
        }

        function closeDraw() {
            document.getElementById('drawResult').classList.remove('active');
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function displayWordList() {
            const wordList = document.getElementById('wordList');
            wordList.innerHTML = '';
            
            words.forEach(word => {
                const div = document.createElement('div');
                div.className = 'word-item';
                div.innerHTML = `<strong>${word.english.toUpperCase()}</strong><br><small>${word.korean}</small>`;
                wordList.appendChild(div);
            });
        }

        function showScreen(screenId) {
            document.querySelectorAll('.game-screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById('mainScreen').style.display = 'none';
            document.getElementById(screenId).classList.add('active');
        }

        function backToMain() {
            document.querySelectorAll('.game-screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.querySelectorAll('.completion-screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById('mainScreen').style.display = 'block';
        }

        function startMemoryGame() {
            showScreen('memoryGameScreen');
            document.getElementById('memoryCompletion').classList.remove('active');
            
            currentGameWords = shuffleArray(words).slice(0, 6);
            matchedPairs = 0;
            flippedCards = [];
            
            document.getElementById('memoryMatching').textContent = '0/6';
            
            const container = document.getElementById('memoryCards');
            container.innerHTML = '';
            
            // ì¹´ë“œ ë°ì´í„° ìƒì„± (ê° ë‹¨ì–´ 2ì¥ì”©)
            const cardData = [];
            currentGameWords.forEach(word => {
                cardData.push(word.english, word.english);
            });
            
            const shuffledCards = shuffleArray(cardData);
            
            shuffledCards.forEach((word, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.textContent = '?';
                card.dataset.word = word;
                card.dataset.index = index;
                card.onclick = () => flipMemoryCard(card, index);
                container.appendChild(card);
            });
        }

        function flipMemoryCard(card, index) {
            if (flippedCards.length >= 2 || card.classList.contains('flipped') || card.classList.contains('matched')) {
                return;
            }
            
            card.classList.add('flipped');
            card.textContent = card.dataset.word.toUpperCase();
            flippedCards.push({card, word: card.dataset.word});
            
            if (flippedCards.length === 2) {
                setTimeout(checkMemoryMatch, 600);
            }
        }

        function checkMemoryMatch() {
            const [first, second] = flippedCards;
            
            if (first.word === second.word) {
                first.card.classList.add('matched');
                second.card.classList.add('matched');
                matchedPairs++;
                document.getElementById('memoryMatching').textContent = `${matchedPairs}/6`;
                
                if (matchedPairs === 6) {
                    setTimeout(() => {
                        stickers += 3;
                        localStorage.setItem('stickers', stickers);
                        updateStickerDisplay();
                        document.getElementById('memoryCompletion').classList.add('active');
                        createCelebrationParticles();
                    }, 500);
                }
            } else {
                setTimeout(() => {
                    first.card.classList.remove('flipped');
                    second.card.classList.remove('flipped');
                    first.card.textContent = '?';
                    second.card.textContent = '?';
                }, 1200);
            }
            
            flippedCards = [];
        }

        function startPictureGame() {
            showScreen('pictureGameScreen');
            document.getElementById('pictureCompletion').classList.remove('active');
            
            const wordsWithPictures = words.filter(word => pictures[word.english]);
            currentGameWords = shuffleArray(wordsWithPictures).slice(0, 6);
            matchedPairs = 0;
            flippedCards = [];
            
            document.getElementById('pictureMatching').textContent = '0/6';
            
            const container = document.getElementById('pictureCards');
            container.innerHTML = '';
            
            const cardData = [];
            currentGameWords.forEach(word => {
                cardData.push({type: 'word', content: word.english});
                cardData.push({type: 'picture', content: pictures[word.english], word: word.english});
            });
            
            const shuffledCards = shuffleArray(cardData);
            
            shuffledCards.forEach((data, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.textContent = '?';
                card.dataset.type = data.type;
                card.dataset.content = data.content;
                card.dataset.word = data.word || data.content;
                card.onclick = () => flipPictureCard(card, index);
                container.appendChild(card);
            });
        }

        function flipPictureCard(card, index) {
            if (flippedCards.length >= 2 || card.classList.contains('flipped') || card.classList.contains('matched')) {
                return;
            }
            
            card.classList.add('flipped');
            card.textContent = card.dataset.content.toUpperCase();
            flippedCards.push({
                card, 
                word: card.dataset.word,
                type: card.dataset.type
            });
            
            if (flippedCards.length === 2) {
                setTimeout(checkPictureMatch, 600);
            }
        }

        function checkPictureMatch() {
            const [first, second] = flippedCards;
            
            if (first.word === second.word && first.type !== second.type) {
                first.card.classList.add('matched');
                second.card.classList.add('matched');
                matchedPairs++;
                document.getElementById('pictureMatching').textContent = `${matchedPairs}/6`;
                
                if (matchedPairs === 6) {
                    setTimeout(() => {
                        stickers += 5;
                        localStorage.setItem('stickers', stickers);
                        updateStickerDisplay();
                        document.getElementById('pictureCompletion').classList.add('active');
                        createCelebrationParticles();
                    }, 500);
                }
            } else {
                setTimeout(() => {
                    first.card.classList.remove('flipped');
                    second.card.classList.remove('flipped');
                    first.card.textContent = '?';
                    second.card.textContent = '?';
                }, 1200);
            }
            
            flippedCards = [];
        }

        function startFillBlankGame() {
            showScreen('fillBlankScreen');
            document.getElementById('fillBlankCompletion').classList.remove('active');
            
            fillBlankQuestions = shuffleArray(words).slice(0, 5);
            currentFillBlankIndex = 0;
            
            showFillBlankQuestion();
        }

        function showFillBlankQuestion() {
            if (currentFillBlankIndex >= 5) {
                stickers += 5;
                localStorage.setItem('stickers', stickers);
                updateStickerDisplay();
                document.getElementById('fillBlankCompletion').classList.add('active');
                createCelebrationParticles();
                return;
            }
            
            const question = fillBlankQuestions[currentFillBlankIndex];
            const word = question.english.toUpperCase();
            const missingIndex = Math.floor(Math.random() * word.length);
            const missingLetter = word[missingIndex];
            
            let wordWithBlank = '';
            for (let i = 0; i < word.length; i++) {
                wordWithBlank += i === missingIndex ? '_' : word[i];
            }
            
            document.getElementById('koreanMeaning').textContent = question.korean;
            document.getElementById('wordWithBlank').textContent = wordWithBlank;
            document.getElementById('currentQuestion').textContent = currentFillBlankIndex + 1;
            
            const options = [missingLetter];
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            while (options.length < 4) {
                const randomLetter = alphabet[Math.floor(Math.random() * alphabet.length)];
                if (!options.includes(randomLetter)) {
                    options.push(randomLetter);
                }
            }
            
            const shuffledOptions = shuffleArray(options);
            const container = document.getElementById('letterOptions');
            container.innerHTML = '';
            
            shuffledOptions.forEach(letter => {
                const button = document.createElement('button');
                button.className = 'letter-btn';
                button.textContent = letter;
                button.onclick = () => checkFillBlankAnswer(letter, missingLetter, wordWithBlank, missingIndex);
                container.appendChild(button);
            });
        }

        function checkFillBlankAnswer(selected, correct, wordWithBlank, missingIndex) {
            if (selected === correct) {
                const correctWord = wordWithBlank.replace('_', correct);
                document.getElementById('wordWithBlank').textContent = correctWord;
                
                setTimeout(() => {
                    currentFillBlankIndex++;
                    showFillBlankQuestion();
                }, 1000);
            } else {
                // í‹€ë¦° ë‹µ ì²˜ë¦¬
                document.querySelectorAll('.letter-btn').forEach(btn => {
                    if (btn.textContent === selected) {
                        btn.style.background = 'red';
                        setTimeout(() => {
                            btn.style.background = '';
                        }, 500);
                    }
                });
            }
        }

        function createParticles() {
            const container = document.getElementById('particles');
            
            setInterval(() => {
                if (Math.random() < 0.1) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.width = particle.style.height = Math.random() * 8 + 4 + 'px';
                    particle.style.animationDuration = (Math.random() * 3 + 2) + 's';
                    container.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 5000);
                }
            }, 300);
        }

        function createCelebrationParticles() {
            const container = document.getElementById('particles');
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.width = particle.style.height = Math.random() * 12 + 8 + 'px';
                    particle.style.background = `hsl(${Math.random() * 360}, 70%, 60%)`;
                    container.appendChild(particle);
                    
                    setTimeout(() => {
                        particle.remove();
                    }, 3000);
                }, i * 100);
            }
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ì´ˆê¸°í™”
        window.onload = init;
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDmpUw8bYOSTExdeFUZf7eaoU35%2FooFxc7qR8ciM1D6XPrliFO0wFh2T0yYS85IJ3eKAAiiDMdP7nWbSEQm8XmNNFsedLs4KW3wHdI9Gy0hJb5JxNlLwBtoRB%2FYReBmAHUcU9Zmhq8BUgH%2FG2%2FUtZpU0KAhrivD881nycD38SdBU2cMEULo90UhO00qtYo4KLr%2F5I1JVZlJYBSZKKAMNNvwr5AVO7Y%2F%2BrQ4XcT1lC%2B6YRDLNG2AUBCDPSbv4oNP9YKAmhieQFflWUxocqjNKvrj%2Bb5NUDjvRjOCPIJ%2FSNgZAxwg4VnWhmCN22NNkW1weGjsyHTBXyJ2ip7EqFsDhI5wq1yjPBNGpTPCZW90rSO1unzJzYrRCKwdMmPdIKsTO1lKCKXGyDIYiHjauuaK1FsJXekdLdJiIDaQt5Mzs22tane2mgd77xcQue1ctGMHU861JuHQ1TVm4Qdlnkfb18Bkt2qdOfb2ZmpyhMqDNNOXTR4cIOijjujtaO1%2F%2FHBgYShg%3D%3D";
        window.__genspark_locale = "ko-KR";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDmpUw8bYOSTExdeFUZf7eaoU35/ooFxc7qR8ciM1D6XPrliFO0wFh2T0yYS85IJ3eKAAiiDMdP7nWbSEQm8XmNNFsedLs4KW3wHdI9Gy0hJb5JxNlLwBtoRB/YReBmAHUcU9Zmhq8BUgH/G2/UtZpU0KAhrivD881nycD38SdBU2cMEULo90UhO00qtYo4KLr/5I1JVZlJYBSZKKAMNNvwr5AVO7Y/+rQ4XcT1lC+6YRDLNG2AUBCDPSbv4oNP9YKAmhieQFflWUxocqjNKvrj+b5NUDjvRjOCPIJ/SNgZAxwg4VnWhmCN22NNkW1weGjsyHTBXyJ2ip7EqFsDhI5wq1yjPBNGpTPCZW90rSO1unzJzYrRCKwdMmPdIKsTO1lKCKXGyDIYiHjauuaK1FsJXekdLdJiIDaQt5Mzs22tane2mgd77xcQue1ctGMHU861JuHQ1TVm4Qdlnkfb18Bkt2qdOfb2ZmpyhMqDNNOXTR4cIOijjujtaO1//HBgYShg==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
