<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü Ïä§Ìé†ÎßÅ ÎßàÏä§ÌÑ∞ Í≤åÏûÑ</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            padding: 10px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .title {
            font-size: 24px;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .sticker-info {
            background: linear-gradient(135deg, #ffd89b 0%, #19547b 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 15px;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            font-weight: 600;
        }

        .draw-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 15px;
            margin-left: 10px;
            cursor: pointer;
            font-weight: 600;
            opacity: 0.5;
        }

        .draw-button:enabled {
            opacity: 1;
        }

        .game-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .game-button {
            flex: 1;
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            border: none;
            padding: 12px 8px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            font-size: 11px;
            text-align: center;
            transition: transform 0.2s;
        }

        .game-button:hover {
            transform: translateY(-2px);
        }

        .word-list {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 20px;
            max-height: 200px;
            overflow-y: auto;
        }

        .word-item {
            background: linear-gradient(135deg, #ffeaa7, #fab1a0);
            padding: 8px 4px;
            border-radius: 8px;
            text-align: center;
            font-size: 10px;
            font-weight: 600;
            color: #333;
        }

        .game-area {
            display: none;
        }

        .game-area.active {
            display: block;
        }

        .game-title {
            text-align: center;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            color: #333;
        }

        .progress {
            text-align: center;
            margin-bottom: 15px;
            font-weight: 600;
            color: #666;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-radius: 10px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 600;
            color: white;
            transition: all 0.3s;
        }

        .card.flipped {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            color: #333;
            border: 2px solid #2196F3;
        }

        .card.matched {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            border: 3px solid #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .fill-blank-area {
            text-align: center;
        }

        .question {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #333;
        }

        .word-display {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #2196F3;
        }

        .letters-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .letter-button {
            padding: 15px;
            font-size: 18px;
            font-weight: 600;
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .letter-button:hover {
            transform: translateY(-2px);
        }

        .letter-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .control-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }

        .control-button {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .back-button {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            color: white;
        }

        .restart-button {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
        }

        .control-button:hover {
            transform: translateY(-2px);
        }

        .completion-message {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .completion-title {
            font-size: 20px;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .completion-reward {
            font-size: 16px;
            font-weight: 600;
            color: #e17055;
        }

        .draw-result {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .draw-animation {
            font-size: 48px;
            margin-bottom: 15px;
            animation: spin 2s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .reward-text {
            font-size: 18px;
            font-weight: 600;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Main Menu -->
        <div id="mainMenu" class="game-area active">
            <div class="header">
                <div class="title">üåü Ïä§Ìé†ÎßÅ ÎßàÏä§ÌÑ∞ Í≤åÏûÑ</div>
                <div class="sticker-info">
                    ‚≠ê Ïä§Ìã∞Ïª§: <span id="stickerCount">0</span>Í∞ú
                </div>
                <button id="drawButton" class="draw-button" disabled onclick="performDraw()">
                    üé∞ ÎΩëÍ∏∞ (5Í∞ú)
                </button>
            </div>

            <div class="game-buttons">
                <button class="game-button" onclick="startMemoryGame()">üß© Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ</button>
                <button class="game-button" onclick="startPictureGame()">üñºÔ∏è Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ</button>
                <button class="game-button" onclick="startFillBlankGame()">‚úèÔ∏è ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ Í≤åÏûÑ</button>
            </div>

            <div class="word-list" id="wordList">
                <!-- Îã®Ïñ¥ Î™©Î°ùÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
            </div>
        </div>

        <!-- Memory Card Game -->
        <div id="memoryGame" class="game-area">
            <div class="game-title">üß© Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ</div>
            <div class="progress">Îß§Ïπ≠: <span id="memoryProgress">0/6</span></div>
            <div class="cards-grid" id="memoryCards"></div>
            <div class="control-buttons">
                <button class="control-button back-button" onclick="backToMenu()">‚Üê ÎèåÏïÑÍ∞ÄÍ∏∞</button>
            </div>
        </div>

        <!-- Picture Matching Game -->
        <div id="pictureGame" class="game-area">
            <div class="game-title">üñºÔ∏è Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ</div>
            <div class="progress">Îß§Ïπ≠: <span id="pictureProgress">0/6</span></div>
            <div class="cards-grid" id="pictureCards"></div>
            <div class="control-buttons">
                <button class="control-button back-button" onclick="backToMenu()">‚Üê ÎèåÏïÑÍ∞ÄÍ∏∞</button>
            </div>
        </div>

        <!-- Fill Blank Game -->
        <div id="fillBlankGame" class="game-area">
            <div class="game-title">‚úèÔ∏è ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ Í≤åÏûÑ</div>
            <div class="progress">Î¨∏Ï†ú <span id="fillBlankProgress">1/5</span></div>
            <div class="fill-blank-area">
                <div class="question" id="koreanMeaning"></div>
                <div class="word-display" id="wordDisplay"></div>
                <div class="letters-grid" id="lettersGrid"></div>
            </div>
            <div class="control-buttons">
                <button class="control-button back-button" onclick="backToMenu()">‚Üê ÎèåÏïÑÍ∞ÄÍ∏∞</button>
            </div>
        </div>

        <!-- Completion Messages -->
        <div id="completionMessage" class="completion-message" style="display: none;">
            <div class="completion-title">üéâ Ï∂ïÌïòÌï©ÎãàÎã§! üéâ</div>
            <div id="completionText"></div>
            <div class="completion-reward" id="rewardText">‚≠ê Ïä§Ìã∞Ïª§ 3Í∞ú ÌöçÎìù! ‚≠ê</div>
        </div>

        <!-- Draw Result -->
        <div id="drawResult" class="draw-result" style="display: none;">
            <div class="game-title">üé∞ ÎΩëÍ∏∞ Í≤∞Í≥º</div>
            <div class="draw-animation" id="drawAnimation">üé∞</div>
            <div class="reward-text" id="drawRewardText"></div>
        </div>
    </div>

    <script>
        // Í≤åÏûÑ ÏÉÅÌÉú
        let stickers = 0;
        let currentGame = null;
        let flippedCards = [];
        let matchedCards = [];
        let currentLevel = 1;
        let fillBlankQuestionIndex = 0;
        let currentWord = null;
        let correctAnswers = 0;

        // Îã®Ïñ¥ Î™©Î°ù (50Í∞ú)
        const words = [
            { word: 'dig', meaning: 'ÌååÎã§' },
            { word: 'hot', meaning: 'Îú®Í±∞Ïö¥' },
            { word: 'jam', meaning: 'Ïûº' },
            { word: 'kid', meaning: 'ÏïÑÏù¥' },
            { word: 'leg', meaning: 'Îã§Î¶¨' },
            { word: 'map', meaning: 'ÏßÄÎèÑ' },
            { word: 'nut', meaning: 'Í≤¨Í≥ºÎ•ò' },
            { word: 'red', meaning: 'Îπ®Í∞ÑÏÉâ' },
            { word: 'six', meaning: 'Ïó¨ÏÑØ' },
            { word: 'top', meaning: 'ÏúÑÏ™Ω' },
            { word: 'tub', meaning: 'ÏöïÏ°∞' },
            { word: 'wet', meaning: 'Ï†ñÏùÄ' },
            { word: 'bake', meaning: 'ÍµΩÎã§' },
            { word: 'cone', meaning: 'ÏõêÎøî' },
            { word: 'cute', meaning: 'Í∑ÄÏó¨Ïö¥' },
            { word: 'five', meaning: 'Îã§ÏÑØ' },
            { word: 'game', meaning: 'Í≤åÏûÑ' },
            { word: 'home', meaning: 'Ïßë' },
            { word: 'mule', meaning: 'ÎÖ∏ÏÉà' },
            { word: 'ride', meaning: 'ÌÉÄÎã§' },
            { word: 'rose', meaning: 'Ïû•ÎØ∏' },
            { word: 'time', meaning: 'ÏãúÍ∞Ñ' },
            { word: 'tube', meaning: 'Í¥Ä' },
            { word: 'wave', meaning: 'ÌååÎèÑ' },
            { word: 'blade', meaning: 'ÏπºÎÇ†' },
            { word: 'brave', meaning: 'Ïö©Í∞êÌïú' },
            { word: 'drive', meaning: 'Ïö¥Ï†ÑÌïòÎã§' },
            { word: 'flute', meaning: 'ÌîåÎ£®Ìä∏' },
            { word: 'grape', meaning: 'Ìè¨ÎèÑ' },
            { word: 'plane', meaning: 'ÎπÑÌñâÍ∏∞' },
            { word: 'price', meaning: 'Í∞ÄÍ≤©' },
            { word: 'skate', meaning: 'Ïä§ÏºÄÏù¥Ìä∏' },
            { word: 'slide', meaning: 'ÎØ∏ÎÅÑÎüºÌãÄ' },
            { word: 'smile', meaning: 'ÏõÉÎã§' },
            { word: 'snake', meaning: 'Î±Ä' },
            { word: 'space', meaning: 'Í≥µÍ∞Ñ' },
            { word: 'happy', meaning: 'ÌñâÎ≥µÌïú' },
            { word: 'robot', meaning: 'Î°úÎ¥á' },
            { word: 'funny', meaning: 'Ïû¨ÎØ∏ÏûàÎäî' },
            { word: 'horse', meaning: 'Îßê' },
            { word: 'again', meaning: 'Îã§Ïãú' },
            { word: 'color', meaning: 'ÏÉâÍπî' },
            { word: 'quiet', meaning: 'Ï°∞Ïö©Ìïú' },
            { word: 'pizza', meaning: 'ÌîºÏûê' },
            { word: 'short', meaning: 'ÏßßÏùÄ' },
            { word: 'water', meaning: 'Î¨º' },
            { word: 'bread', meaning: 'Îπµ' },
            { word: 'share', meaning: 'ÎÇòÎàÑÎã§' },
            { word: 'cherry', meaning: 'Ï≤¥Î¶¨' },
            { word: 'flower', meaning: 'ÍΩÉ' },
            { word: 'friend', meaning: 'ÏπúÍµ¨' },
            { word: 'little', meaning: 'ÏûëÏùÄ' },
            { word: 'parent', meaning: 'Î∂ÄÎ™®' },
            { word: 'purple', meaning: 'Î≥¥ÎùºÏÉâ' },
            { word: 'yellow', meaning: 'ÎÖ∏ÎûÄÏÉâ' }
        ];

        // Í∑∏Î¶º Îß§Ïπ≠Ïö© Ïù¥Î™®ÏßÄ
        const pictureEmojis = {
            'hot': 'üî•', 'cat': 'üê±', 'dog': 'üê∂', 'sun': '‚òÄÔ∏è', 'tree': 'üå≥',
            'water': 'üíß', 'bread': 'üçû', 'pizza': 'üçï', 'flower': 'üå∏', 'horse': 'üêé',
            'happy': 'üòä', 'robot': 'ü§ñ', 'cherry': 'üçí', 'grape': 'üçá', 'home': 'üè†',
            'time': '‚è∞', 'game': 'üéÆ', 'space': 'üöÄ', 'plane': '‚úàÔ∏è', 'snake': 'üêç'
        };

        // Ï¥àÍ∏∞Ìôî
        function init() {
            displayWordList();
            updateStickerDisplay();
        }

        // Îã®Ïñ¥ Î™©Î°ù ÌëúÏãú
        function displayWordList() {
            const wordListEl = document.getElementById('wordList');
            wordListEl.innerHTML = '';
            
            words.forEach(wordObj => {
                const wordEl = document.createElement('div');
                wordEl.className = 'word-item';
                wordEl.textContent = wordObj.word.toUpperCase();
                wordListEl.appendChild(wordEl);
            });
        }

        // Ïä§Ìã∞Ïª§ ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
        function updateStickerDisplay() {
            document.getElementById('stickerCount').textContent = stickers;
            const drawButton = document.getElementById('drawButton');
            
            if (stickers >= 5) {
                drawButton.disabled = false;
                drawButton.style.opacity = '1';
            } else {
                drawButton.disabled = true;
                drawButton.style.opacity = '0.5';
            }
        }

        // Î∞∞Ïó¥ ÏÖîÌîå Ìï®Ïàò
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // ÎûúÎç§ Îã®Ïñ¥ ÏÑ†ÌÉù
        function getRandomWords(count) {
            const shuffled = shuffleArray(words);
            return shuffled.slice(0, count);
        }

        // Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ ÏãúÏûë
        function startMemoryGame() {
            currentGame = 'memory';
            hideAllScreens();
            document.getElementById('memoryGame').classList.add('active');
            setupMemoryGame();
        }

        // Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ ÏÑ§Ï†ï
        function setupMemoryGame() {
            const gameWords = getRandomWords(6);
            const cards = [];
            
            // Í∞Å Îã®Ïñ¥Î•º 2Í∞úÏî© Ï∂îÍ∞Ä
            gameWords.forEach(wordObj => {
                cards.push(wordObj.word.toUpperCase());
                cards.push(wordObj.word.toUpperCase());
            });
            
            const shuffledCards = shuffleArray(cards);
            const cardsContainer = document.getElementById('memoryCards');
            cardsContainer.innerHTML = '';
            
            shuffledCards.forEach((word, index) => {
                const card = document.createElement('button');
                card.className = 'card';
                card.textContent = '?';
                card.onclick = () => flipCard(card, word, index);
                cardsContainer.appendChild(card);
            });
            
            flippedCards = [];
            matchedCards = [];
            updateMemoryProgress();
        }

        // Ïπ¥Îìú Îí§ÏßëÍ∏∞
        function flipCard(cardElement, word, index) {
            if (flippedCards.length < 2 && !cardElement.classList.contains('flipped') && !cardElement.classList.contains('matched')) {
                cardElement.classList.add('flipped');
                cardElement.textContent = word;
                flippedCards.push({element: cardElement, word: word, index: index});
                
                if (flippedCards.length === 2) {
                    setTimeout(checkMemoryMatch, 600);
                }
            }
        }

        // Îß§Ïπ≠ ÌôïÏù∏
        function checkMemoryMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.word === card2.word) {
                // Îß§Ïπ≠ ÏÑ±Í≥µ
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                matchedCards.push(card1.index, card2.index);
                
                if (matchedCards.length === 12) {
                    // Í≤åÏûÑ ÏôÑÎ£å
                    setTimeout(() => {
                        showCompletion('Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ ÏôÑÎ£å!', 3, 'memory');
                    }, 500);
                }
            } else {
                // Îß§Ïπ≠ Ïã§Ìå®
                setTimeout(() => {
                    card1.element.classList.remove('flipped');
                    card2.element.classList.remove('flipped');
                    card1.element.textContent = '?';
                    card2.element.textContent = '?';
                }, 1200);
            }
            
            flippedCards = [];
            updateMemoryProgress();
        }

        // Î©îÎ™®Î¶¨ Í≤åÏûÑ ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updateMemoryProgress() {
            const matched = matchedCards.length / 2;
            document.getElementById('memoryProgress').textContent = `${matched}/6`;
        }

        // Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ ÏãúÏûë
        function startPictureGame() {
            currentGame = 'picture';
            hideAllScreens();
            document.getElementById('pictureGame').classList.add('active');
            setupPictureGame();
        }

        // Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ ÏÑ§Ï†ï
        function setupPictureGame() {
            const availableWords = words.filter(w => pictureEmojis[w.word]);
            const gameWords = shuffleArray(availableWords).slice(0, 6);
            const cards = [];
            
            // ÏòÅÏñ¥ Îã®Ïñ¥ÏôÄ Í∑∏Î¶ºÏùÑ Í∞ÅÍ∞Å Ï∂îÍ∞Ä
            gameWords.forEach(wordObj => {
                cards.push({type: 'word', content: wordObj.word.toUpperCase(), match: wordObj.word});
                cards.push({type: 'picture', content: pictureEmojis[wordObj.word], match: wordObj.word});
            });
            
            const shuffledCards = shuffleArray(cards);
            const cardsContainer = document.getElementById('pictureCards');
            cardsContainer.innerHTML = '';
            
            shuffledCards.forEach((cardData, index) => {
                const card = document.createElement('button');
                card.className = 'card';
                card.textContent = '?';
                card.onclick = () => flipPictureCard(card, cardData, index);
                cardsContainer.appendChild(card);
            });
            
            flippedCards = [];
            matchedCards = [];
            updatePictureProgress();
        }

        // Í∑∏Î¶º Ïπ¥Îìú Îí§ÏßëÍ∏∞
        function flipPictureCard(cardElement, cardData, index) {
            if (flippedCards.length < 2 && !cardElement.classList.contains('flipped') && !cardElement.classList.contains('matched')) {
                cardElement.classList.add('flipped');
                cardElement.textContent = cardData.content;
                flippedCards.push({element: cardElement, data: cardData, index: index});
                
                if (flippedCards.length === 2) {
                    setTimeout(checkPictureMatch, 600);
                }
            }
        }

        // Í∑∏Î¶º Îß§Ïπ≠ ÌôïÏù∏
        function checkPictureMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.data.match === card2.data.match) {
                // Îß§Ïπ≠ ÏÑ±Í≥µ
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                matchedCards.push(card1.index, card2.index);
                
                if (matchedCards.length === 12) {
                    // Í≤åÏûÑ ÏôÑÎ£å
                    setTimeout(() => {
                        showCompletion('Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ ÏôÑÎ£å!', 5, 'picture');
                    }, 500);
                }
            } else {
                // Îß§Ïπ≠ Ïã§Ìå®
                setTimeout(() => {
                    card1.element.classList.remove('flipped');
                    card2.element.classList.remove('flipped');
                    card1.element.textContent = '?';
                    card2.element.textContent = '?';
                }, 1200);
            }
            
            flippedCards = [];
            updatePictureProgress();
        }

        // Í∑∏Î¶º Í≤åÏûÑ ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updatePictureProgress() {
            const matched = matchedCards.length / 2;
            document.getElementById('pictureProgress').textContent = `${matched}/6`;
        }

        // ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ Í≤åÏûÑ ÏãúÏûë
        function startFillBlankGame() {
            currentGame = 'fillBlank';
            hideAllScreens();
            document.getElementById('fillBlankGame').classList.add('active');
            fillBlankQuestionIndex = 0;
            correctAnswers = 0;
            setupFillBlankGame();
        }

        // ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ Í≤åÏûÑ ÏÑ§Ï†ï
        function setupFillBlankGame() {
            const randomWords = getRandomWords(5);
            currentWord = randomWords[fillBlankQuestionIndex];
            
            document.getElementById('koreanMeaning').textContent = `Îúª: ${currentWord.meaning}`;
            
            // ÎπàÏπ∏ ÎßåÎì§Í∏∞
            const word = currentWord.word.toUpperCase();
            const blankIndex = Math.floor(Math.random() * word.length);
            const displayWord = word.split('').map((letter, index) => 
                index === blankIndex ? '_' : letter
            ).join('');
            
            document.getElementById('wordDisplay').textContent = displayWord;
            
            // ÏÑ†ÌÉùÌï† Í∏ÄÏûêÎì§ ÏÉùÏÑ±
            const correctLetter = word[blankIndex];
            const wrongLetters = ['A', 'E', 'I', 'O', 'U', 'B', 'C', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'X', 'Y', 'Z']
                .filter(l => l !== correctLetter);
            
            const shuffledWrongLetters = shuffleArray(wrongLetters).slice(0, 7);
            const allLetters = shuffleArray([correctLetter, ...shuffledWrongLetters]);
            
            const lettersContainer = document.getElementById('lettersGrid');
            lettersContainer.innerHTML = '';
            
            allLetters.forEach(letter => {
                const button = document.createElement('button');
                button.className = 'letter-button';
                button.textContent = letter;
                button.onclick = () => checkFillBlankAnswer(letter, correctLetter, blankIndex);
                lettersContainer.appendChild(button);
            });
            
            updateFillBlankProgress();
        }

        // ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ Îãµ ÌôïÏù∏
        function checkFillBlankAnswer(selectedLetter, correctLetter, blankIndex) {
            if (selectedLetter === correctLetter) {
                correctAnswers++;
                fillBlankQuestionIndex++;
                
                // Ï†ïÎãµ ÌëúÏãú
                const word = currentWord.word.toUpperCase();
                document.getElementById('wordDisplay').textContent = word;
                
                if (fillBlankQuestionIndex < 5) {
                    setTimeout(() => {
                        setupFillBlankGame();
                    }, 1500);
                } else {
                    setTimeout(() => {
                        showCompletion('ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ ÏôÑÎ£å!', 5, 'fillBlank');
                    }, 1500);
                }
            } else {
                // ÌãÄÎ¶∞ Îãµ - Î≤ÑÌäº ÎπÑÌôúÏÑ±Ìôî
                event.target.disabled = true;
            }
        }

        // ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updateFillBlankProgress() {
            document.getElementById('fillBlankProgress').textContent = `${fillBlankQuestionIndex + 1}/5`;
        }

        // ÏôÑÎ£å Î©îÏãúÏßÄ ÌëúÏãú
        function showCompletion(message, stickerReward, gameType) {
            hideAllScreens();
            
            const completionEl = document.getElementById('completionMessage');
            document.getElementById('completionText').textContent = message;
            document.getElementById('rewardText').textContent = `‚≠ê Ïä§Ìã∞Ïª§ ${stickerReward}Í∞ú ÌöçÎìù! ‚≠ê`;
            completionEl.style.display = 'block';
            
            // Ïä§Ìã∞Ïª§ Ï∂îÍ∞Ä
            stickers += stickerReward;
            updateStickerDisplay();
            
            // Îã§Ïãú ÏãúÏûë Î≤ÑÌäº Ï∂îÍ∞Ä
            setTimeout(() => {
                const restartButton = document.createElement('button');
                restartButton.className = 'control-button restart-button';
                restartButton.textContent = 'üîÑ Îã§Ïãú ÏãúÏûë';
                restartButton.onclick = () => {
                    completionEl.style.display = 'none';
                    if (gameType === 'memory') startMemoryGame();
                    else if (gameType === 'picture') startPictureGame();
                    else if (gameType === 'fillBlank') startFillBlankGame();
                };
                
                const backButton = document.createElement('button');
                backButton.className = 'control-button back-button';
                backButton.textContent = 'üè† Î©îÎâ¥Î°ú';
                backButton.onclick = () => {
                    completionEl.style.display = 'none';
                    backToMenu();
                };
                
                const buttonContainer = document.createElement('div');
                buttonContainer.className = 'control-buttons';
                buttonContainer.style.marginTop = '15px';
                buttonContainer.appendChild(restartButton);
                buttonContainer.appendChild(backButton);
                completionEl.appendChild(buttonContainer);
            }, 1000);
        }

        // ÎΩëÍ∏∞ Ïã§Ìñâ
        function performDraw() {
            if (stickers < 5) return;
            
            hideAllScreens();
            const drawResultEl = document.getElementById('drawResult');
            drawResultEl.style.display = 'block';
            
            // Ïï†ÎãàÎ©îÏù¥ÏÖò ÏãúÏûë
            const animationEl = document.getElementById('drawAnimation');
            animationEl.style.animation = 'spin 2s linear infinite';
            
            setTimeout(() => {
                animationEl.style.animation = 'none';
                
                // Î≥¥ÏÉÅ Í≤∞Ï†ï
                const random = Math.random() * 100;
                let reward = '';
                
                if (random < 0.5) {
                    reward = 'üß∏ Ïû•ÎÇúÍ∞ê ÏÇ¨Ï£ºÍ∏∞! ÎåÄÎ∞ï!';
                    animationEl.textContent = 'üß∏';
                } else if (random < 15) {
                    reward = 'ü§ó ÏóÑÎßàÎûë ÏéÑÏéÑÏéÑ!';
                    animationEl.textContent = 'ü§ó';
                } else if (random < 30) {
                    reward = 'üêé ÏïÑÎπ† ÎßêÌÉÄÍ∏∞ ÎÜÄÏù¥!';
                    animationEl.textContent = 'üêé';
                } else if (random < 65) {
                    reward = 'üç™ ÎßõÏûàÎäî Í∞ÑÏãù!';
                    animationEl.textContent = 'üç™';
                } else {
                    reward = 'üìö Ïû†Îì§Í∏∞ Ï†Ñ Ï±Ö Ìïú Í∂å Ï∂îÍ∞Ä!';
                    animationEl.textContent = 'üìö';
                }
                
                document.getElementById('drawRewardText').textContent = reward;
                
                // Ïä§Ìã∞Ïª§ Ï∞®Í∞ê
                stickers -= 5;
                updateStickerDisplay();
                
                // Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞ Î≤ÑÌäº
                setTimeout(() => {
                    const backButton = document.createElement('button');
                    backButton.className = 'control-button back-button';
                    backButton.textContent = 'üè† Î©îÎâ¥Î°ú';
                    backButton.onclick = () => {
                        drawResultEl.style.display = 'none';
                        backToMenu();
                    };
                    drawResultEl.appendChild(backButton);
                }, 2000);
                
            }, 3000);
        }

        // Î©îÎâ¥Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞
        function backToMenu() {
            hideAllScreens();
            document.getElementById('mainMenu').classList.add('active');
        }

        // Î™®Îì† ÌôîÎ©¥ Ïà®Í∏∞Í∏∞
        function hideAllScreens() {
            document.querySelectorAll('.game-area').forEach(area => {
                area.classList.remove('active');
            });
            document.getElementById('completionMessage').style.display = 'none';
            document.getElementById('drawResult').style.display = 'none';
            
            // ÎΩëÍ∏∞ Í≤∞Í≥ºÏóêÏÑú Ï∂îÍ∞ÄÎêú Î≤ÑÌäºÎì§ Ï†úÍ±∞
            const drawResult = document.getElementById('drawResult');
            const extraButtons = drawResult.querySelectorAll('.control-button');
            extraButtons.forEach(btn => btn.remove());
            
            // ÏôÑÎ£å Î©îÏãúÏßÄÏóêÏÑú Ï∂îÍ∞ÄÎêú Î≤ÑÌäºÎì§ Ï†úÍ±∞
            const completion = document.getElementById('completionMessage');
            const completionButtons = completion.querySelectorAll('.control-buttons');
            completionButtons.forEach(container => container.remove());
        }

        // ÌéòÏù¥ÏßÄ Î°úÎìúÏãú Ï¥àÍ∏∞Ìôî
        window.onload = init;
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDgpUVRVyM7oNHnMnGPF1pZhY%2Fd%2B9MihrEQs%2Foq5SbsnuvS9DvM1EvvhxJGAsfVLa%2BSrET1lFQ0GwFVRqFSogdDsaSyqUI9OH7U1Dy4ABwUw5n2slk%2BZn0cmgs01FSTJAbIvpvk2PdacIoPGbaOMm8okpwMQ9KCXQqmtWNJrqDFDHw5jmbNZiQmq%2BwSN2SnmOtxjTzDRnbi0khhwQDMtj6Nr6knupH7Lw%2Bl%2BssPZ%2BFGYPmVX8%2F8a6NXEZxLcf5r3hmiby3RqncoUTv%2F35i%2BTLrB8jJPrrv0lOnvaFvXmxQ0RWasEactnxosnvCRfTK2ca3trw70Sw5OSpwn%2BxNHud7SjBEV8HEDbdM7j2kPWtvPpIUJqlOj%2F1os4WtNrNGPCQL1VnX5xFXsEHOWcXODKZaikIHrAgABIsWtr%2BHYBkVDJw79c%2FRVvTJ8F8B3fZXJ2TkX1n2rljvlHAWUwHDoo7xzjBeCuZoNyLuc5gLvrj%2BnzmpTJHEvp8bnIJgvMpGAbbR4LVf1ntHgmGycAj7BilgNg%3D";
        window.__genspark_locale = "ko-KR";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDgpUVRVyM7oNHnMnGPF1pZhY/d+9MihrEQs/oq5SbsnuvS9DvM1EvvhxJGAsfVLa+SrET1lFQ0GwFVRqFSogdDsaSyqUI9OH7U1Dy4ABwUw5n2slk+Zn0cmgs01FSTJAbIvpvk2PdacIoPGbaOMm8okpwMQ9KCXQqmtWNJrqDFDHw5jmbNZiQmq+wSN2SnmOtxjTzDRnbi0khhwQDMtj6Nr6knupH7Lw+l+ssPZ+FGYPmVX8/8a6NXEZxLcf5r3hmiby3RqncoUTv/35i+TLrB8jJPrrv0lOnvaFvXmxQ0RWasEactnxosnvCRfTK2ca3trw70Sw5OSpwn+xNHud7SjBEV8HEDbdM7j2kPWtvPpIUJqlOj/1os4WtNrNGPCQL1VnX5xFXsEHOWcXODKZaikIHrAgABIsWtr+HYBkVDJw79c/RVvTJ8F8B3fZXJ2TkX1n2rljvlHAWUwHDoo7xzjBeCuZoNyLuc5gLvrj+nzmpTJHEvp8bnIJgvMpGAbbR4LVf1ntHgmGycAj7BilgNg=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
