<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü Ïä§Ìé†ÎßÅ ÎßàÏä§ÌÑ∞ Í≤åÏûÑ</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            color: #2c3e50;
            overflow-x: hidden;
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
        }

        .title {
            font-size: 24px;
            font-weight: 700;
            color: #8e44ad;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .sticker-info {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 15px;
        }

        .sticker-count {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }

        .draw-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .draw-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .draw-button:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .words-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .word-card {
            background: rgba(255, 255, 255, 0.8);
            padding: 8px 4px;
            border-radius: 10px;
            text-align: center;
            font-size: 12px;
            font-weight: 500;
            color: #2c3e50;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .word-card.easy { border-color: #27ae60; }
        .word-card.medium { border-color: #f39c12; }
        .word-card.hard { border-color: #e74c3c; }

        .games-section {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .game-button {
            flex: 1;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border: none;
            padding: 15px 8px;
            border-radius: 15px;
            font-weight: 600;
            font-size: 11px;
            color: #2c3e50;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            line-height: 1.2;
        }

        .game-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .game-area {
            background: rgba(255, 255, 255, 0.2);
            padding: 25px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            margin-bottom: 20px;
            min-height: 400px;
        }

        .game-title {
            font-size: 20px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            color: #8e44ad;
        }

        .back-button {
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            color: #2c3e50;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .progress {
            text-align: center;
            margin-bottom: 20px;
            font-weight: 600;
            color: #8e44ad;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .card {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .card:hover {
            transform: scale(1.05);
        }

        .card.flipped {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            color: #2c3e50;
            border: 2px solid #2196F3;
        }

        .card.matched {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            border: 3px solid #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .fill-blank-area {
            text-align: center;
        }

        .question {
            font-size: 18px;
            margin-bottom: 20px;
            color: #8e44ad;
            font-weight: 600;
        }

        .word-display {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .letters-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .letter-button {
            padding: 15px;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .letter-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .letter-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .celebration {
            text-align: center;
            padding: 30px;
        }

        .celebration h2 {
            color: #8e44ad;
            margin-bottom: 15px;
            font-size: 24px;
        }

        .celebration p {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 16px;
            font-weight: 600;
        }

        .celebration-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .celebration-button {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            border: none;
            padding: 12px 20px;
            border-radius: 20px;
            font-weight: 600;
            color: #2c3e50;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .celebration-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }

        .popup-content {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 350px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border: 3px solid rgba(255, 255, 255, 0.3);
            position: relative;
        }

        .popup-title {
            font-size: 24px;
            font-weight: 700;
            color: #8e44ad;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .reward-display {
            font-size: 60px;
            margin-bottom: 15px;
            animation: bounce 1s ease-in-out;
        }

        .reward-text {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 25px;
            line-height: 1.4;
        }

        .popup-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .popup-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .hidden {
            display: none;
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(180deg); }
        }

        .sparkle {
            animation: sparkle 0.6s ease-in-out;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .bounce {
            animation: bounce 1s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .popup-content {
            animation: fadeIn 0.3s ease-out;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="title">üåü Ïä§Ìé†ÎßÅ ÎßàÏä§ÌÑ∞ Í≤åÏûÑ</div>
            <div class="sticker-info">
                <div class="sticker-count">‚≠ê Ïä§Ìã∞Ïª§: <span id="stickerCount">0</span>Í∞ú</div>
                <button class="draw-button" id="drawButton" disabled>üîí ÎΩëÍ∏∞ (5Í∞ú)</button>
            </div>
        </div>

        <div id="mainScreen">
            <div class="words-grid" id="wordsGrid"></div>
            
            <div class="games-section">
                <button class="game-button" onclick="startMemoryGame()">
                    üß©<br>Î©îÎ™®Î¶¨ Ïπ¥Îìú<br>Í≤åÏûÑ
                </button>
                <button class="game-button" onclick="startPictureGame()">
                    üñºÔ∏è<br>Í∑∏Î¶º Îß§Ïπ≠<br>Í≤åÏûÑ
                </button>
                <button class="game-button" onclick="startFillBlankGame()">
                    ‚úèÔ∏è<br>ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞<br>Í≤åÏûÑ
                </button>
            </div>
        </div>

        <div id="gameArea" class="game-area hidden">
            <button class="back-button" onclick="goHome()">‚Üê ÎèåÏïÑÍ∞ÄÍ∏∞</button>
            
            <div id="memoryGame" class="hidden">
                <div class="game-title">üß© Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ</div>
                <div class="progress">Îß§Ïπ≠: <span id="memoryProgress">0/6</span></div>
                <div class="cards-grid" id="memoryCards"></div>
            </div>

            <div id="pictureGame" class="hidden">
                <div class="game-title">üñºÔ∏è Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ</div>
                <div class="progress">Îß§Ïπ≠: <span id="pictureProgress">0/6</span></div>
                <div class="cards-grid" id="pictureCards"></div>
            </div>

            <div id="fillBlankGame" class="hidden">
                <div class="game-title">‚úèÔ∏è ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ Í≤åÏûÑ</div>
                <div class="progress">Î¨∏Ï†ú <span id="questionNumber">1</span>/5</div>
                <div class="fill-blank-area">
                    <div class="question" id="questionText"></div>
                    <div class="word-display" id="wordDisplay"></div>
                    <div class="letters-grid" id="lettersGrid"></div>
                </div>
            </div>

            <div id="celebration" class="celebration hidden">
                <h2>üéâ Ï∂ïÌïòÌï©ÎãàÎã§! üéâ</h2>
                <p id="celebrationText"></p>
                <p id="rewardText"></p>
                <div class="celebration-buttons">
                    <button class="celebration-button" onclick="restartCurrentGame()">üîÑ Îã§Ïãú ÏãúÏûë</button>
                    <button class="celebration-button" onclick="goHome()">üè† Î©îÎâ¥Î°ú</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ÎΩëÍ∏∞ Í≤∞Í≥º ÌåùÏóÖ -->
    <div id="drawPopup" class="popup-overlay hidden">
        <div class="popup-content">
            <div class="popup-title">üé∞ ÎΩëÍ∏∞ Í≤∞Í≥º</div>
            <div class="reward-display" id="rewardIcon"></div>
            <div class="reward-text" id="rewardDescription"></div>
            <button class="popup-button" onclick="closeDrawPopup()">ÌôïÏù∏</button>
        </div>
    </div>

    <script>
        const words = [
            {word: 'dig', meaning: 'ÌååÎã§', difficulty: 'easy'},
            {word: 'hot', meaning: 'Îú®Í±∞Ïö¥', difficulty: 'easy'},
            {word: 'jam', meaning: 'Ïûº', difficulty: 'easy'},
            {word: 'kid', meaning: 'ÏïÑÏù¥', difficulty: 'easy'},
            {word: 'leg', meaning: 'Îã§Î¶¨', difficulty: 'easy'},
            {word: 'map', meaning: 'ÏßÄÎèÑ', difficulty: 'easy'},
            {word: 'nut', meaning: 'Í≤¨Í≥ºÎ•ò', difficulty: 'easy'},
            {word: 'red', meaning: 'Îπ®Í∞ÑÏÉâ', difficulty: 'easy'},
            {word: 'six', meaning: 'Ïó¨ÏÑØ', difficulty: 'easy'},
            {word: 'top', meaning: 'ÏúÑ', difficulty: 'easy'},
            {word: 'tub', meaning: 'ÏöïÏ°∞', difficulty: 'easy'},
            {word: 'wet', meaning: 'Ï†ñÏùÄ', difficulty: 'easy'},
            {word: 'bake', meaning: 'ÍµΩÎã§', difficulty: 'medium'},
            {word: 'cone', meaning: 'ÏõêÎøî', difficulty: 'medium'},
            {word: 'cute', meaning: 'Í∑ÄÏó¨Ïö¥', difficulty: 'medium'},
            {word: 'five', meaning: 'Îã§ÏÑØ', difficulty: 'medium'},
            {word: 'game', meaning: 'Í≤åÏûÑ', difficulty: 'medium'},
            {word: 'home', meaning: 'Ïßë', difficulty: 'medium'},
            {word: 'mule', meaning: 'ÎÖ∏ÏÉà', difficulty: 'medium'},
            {word: 'ride', meaning: 'ÌÉÄÎã§', difficulty: 'medium'},
            {word: 'rose', meaning: 'Ïû•ÎØ∏', difficulty: 'medium'},
            {word: 'time', meaning: 'ÏãúÍ∞Ñ', difficulty: 'medium'},
            {word: 'tube', meaning: 'Í¥Ä', difficulty: 'medium'},
            {word: 'wave', meaning: 'ÌååÎèÑ', difficulty: 'medium'},
            {word: 'blade', meaning: 'ÏπºÎÇ†', difficulty: 'medium'},
            {word: 'brave', meaning: 'Ïö©Í∞êÌïú', difficulty: 'hard'},
            {word: 'drive', meaning: 'Ïö¥Ï†ÑÌïòÎã§', difficulty: 'hard'},
            {word: 'flute', meaning: 'ÌîåÎ£®Ìä∏', difficulty: 'hard'},
            {word: 'grape', meaning: 'Ìè¨ÎèÑ', difficulty: 'hard'},
            {word: 'plane', meaning: 'ÎπÑÌñâÍ∏∞', difficulty: 'hard'},
            {word: 'price', meaning: 'Í∞ÄÍ≤©', difficulty: 'hard'},
            {word: 'skate', meaning: 'Ïä§ÏºÄÏù¥Ìä∏', difficulty: 'hard'},
            {word: 'slide', meaning: 'ÎØ∏ÎÅÑÎüºÌãÄ', difficulty: 'hard'},
            {word: 'smile', meaning: 'ÏõÉÎã§', difficulty: 'hard'},
            {word: 'snake', meaning: 'Î±Ä', difficulty: 'hard'},
            {word: 'space', meaning: 'Í≥µÍ∞Ñ', difficulty: 'hard'},
            {word: 'happy', meaning: 'ÌñâÎ≥µÌïú', difficulty: 'hard'},
            {word: 'robot', meaning: 'Î°úÎ¥á', difficulty: 'hard'},
            {word: 'funny', meaning: 'Ïû¨ÎØ∏ÏûàÎäî', difficulty: 'hard'},
            {word: 'horse', meaning: 'Îßê', difficulty: 'hard'},
            {word: 'again', meaning: 'Îã§Ïãú', difficulty: 'hard'},
            {word: 'color', meaning: 'ÏÉâÍπî', difficulty: 'hard'},
            {word: 'quiet', meaning: 'Ï°∞Ïö©Ìïú', difficulty: 'hard'},
            {word: 'pizza', meaning: 'ÌîºÏûê', difficulty: 'hard'},
            {word: 'short', meaning: 'ÏßßÏùÄ', difficulty: 'hard'},
            {word: 'water', meaning: 'Î¨º', difficulty: 'hard'},
            {word: 'bread', meaning: 'Îπµ', difficulty: 'hard'},
            {word: 'share', meaning: 'ÎÇòÎàÑÎã§', difficulty: 'hard'},
            {word: 'cherry', meaning: 'Ï≤¥Î¶¨', difficulty: 'hard'},
            {word: 'flower', meaning: 'ÍΩÉ', difficulty: 'hard'},
            {word: 'friend', meaning: 'ÏπúÍµ¨', difficulty: 'hard'},
            {word: 'little', meaning: 'ÏûëÏùÄ', difficulty: 'hard'},
            {word: 'parent', meaning: 'Î∂ÄÎ™®', difficulty: 'hard'},
            {word: 'purple', meaning: 'Î≥¥ÎùºÏÉâ', difficulty: 'hard'},
            {word: 'yellow', meaning: 'ÎÖ∏ÎûÄÏÉâ', difficulty: 'hard'}
        ];

        const pictures = {
            'cat': 'üê±', 'hot': 'üî•', 'sun': '‚òÄÔ∏è', 'water': 'üíß', 'bread': 'üçû',
            'flower': 'üå∏', 'horse': 'üêé', 'pizza': 'üçï', 'cherry': 'üçí', 'grape': 'üçá',
            'snake': 'üêç', 'smile': 'üòä', 'happy': 'üòä', 'robot': 'ü§ñ', 'friend': 'üë´'
        };

        let stickers = parseInt(localStorage.getItem('stickers')) || 0;
        let currentGame = '';
        let flippedCards = [];
        let matchedPairs = 0;
        let gameWords = [];
        let currentQuestion = 0;
        let fillBlankWords = [];
        let currentWord = '';
        let currentAnswer = '';

        function updateStickerDisplay() {
            document.getElementById('stickerCount').textContent = stickers;
            const drawButton = document.getElementById('drawButton');
            if (stickers >= 5) {
                drawButton.disabled = false;
                drawButton.textContent = 'üé∞ ÎΩëÍ∏∞ (5Í∞ú)';
                drawButton.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                drawButton.onclick = performDraw;
            } else {
                drawButton.disabled = true;
                drawButton.textContent = 'üîí ÎΩëÍ∏∞ (5Í∞ú)';
                drawButton.style.background = '#cccccc';
                drawButton.onclick = null;
            }
        }

        function saveStickers() {
            localStorage.setItem('stickers', stickers.toString());
        }

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function getRandomWords(count) {
            const shuffled = shuffleArray(words);
            return shuffled.slice(0, count);
        }

        function displayWords() {
            const grid = document.getElementById('wordsGrid');
            grid.innerHTML = '';
            words.forEach(wordObj => {
                const card = document.createElement('div');
                card.className = `word-card ${wordObj.difficulty}`;
                card.innerHTML = `<div style="font-weight: 600;">${wordObj.word.toUpperCase()}</div><div style="font-size: 10px; color: #666;">${wordObj.meaning}</div>`;
                grid.appendChild(card);
            });
        }

        function goHome() {
            document.getElementById('mainScreen').classList.remove('hidden');
            document.getElementById('gameArea').classList.add('hidden');
            hideAllGames();
        }

        function hideAllGames() {
            document.getElementById('memoryGame').classList.add('hidden');
            document.getElementById('pictureGame').classList.add('hidden');
            document.getElementById('fillBlankGame').classList.add('hidden');
            document.getElementById('celebration').classList.add('hidden');
        }

        function startMemoryGame() {
            currentGame = 'memory';
            gameWords = getRandomWords(6);
            matchedPairs = 0;
            flippedCards = [];
            
            document.getElementById('mainScreen').classList.add('hidden');
            document.getElementById('gameArea').classList.remove('hidden');
            hideAllGames();
            document.getElementById('memoryGame').classList.remove('hidden');
            
            setupMemoryCards();
            updateMemoryProgress();
        }

        function setupMemoryCards() {
            const container = document.getElementById('memoryCards');
            container.innerHTML = '';
            
            const cards = [];
            gameWords.forEach(wordObj => {
                cards.push(wordObj.word, wordObj.word);
            });
            
            const shuffledCards = shuffleArray(cards);
            
            shuffledCards.forEach((word, index) => {
                const card = document.createElement('button');
                card.className = 'card';
                card.textContent = '?';
                card.dataset.word = word;
                card.dataset.index = index;
                card.onclick = () => flipMemoryCard(card, index);
                container.appendChild(card);
            });
        }

        function flipMemoryCard(card, index) {
            if (flippedCards.length < 2 && !card.classList.contains('flipped') && !card.classList.contains('matched')) {
                card.classList.add('flipped');
                card.textContent = card.dataset.word.toUpperCase();
                flippedCards.push({element: card, word: card.dataset.word});
                
                if (flippedCards.length === 2) {
                    setTimeout(checkMemoryMatch, 600);
                }
            }
        }

        function checkMemoryMatch() {
            const [card1, card2] = flippedCards;
            if (card1.word === card2.word) {
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                matchedPairs++;
                updateMemoryProgress();
                
                if (matchedPairs === 6) {
                    setTimeout(() => showCelebration('Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ ÏôÑÎ£å!', 3), 500);
                }
            } else {
                setTimeout(() => {
                    card1.element.classList.remove('flipped');
                    card2.element.classList.remove('flipped');
                    card1.element.textContent = '?';
                    card2.element.textContent = '?';
                }, 1200);
            }
            flippedCards = [];
        }

        function updateMemoryProgress() {
            document.getElementById('memoryProgress').textContent = `${matchedPairs}/6`;
        }

        function startPictureGame() {
            currentGame = 'picture';
            gameWords = getRandomWords(6).filter(wordObj => pictures[wordObj.word]);
            if (gameWords.length < 6) {
                const pictureWords = words.filter(wordObj => pictures[wordObj.word]);
                gameWords = shuffleArray(pictureWords).slice(0, 6);
            }
            matchedPairs = 0;
            flippedCards = [];
            
            document.getElementById('mainScreen').classList.add('hidden');
            document.getElementById('gameArea').classList.remove('hidden');
            hideAllGames();
            document.getElementById('pictureGame').classList.remove('hidden');
            
            setupPictureCards();
            updatePictureProgress();
        }

        function setupPictureCards() {
            const container = document.getElementById('pictureCards');
            container.innerHTML = '';
            
            const cards = [];
            gameWords.forEach(wordObj => {
                cards.push({type: 'word', content: wordObj.word});
                cards.push({type: 'picture', content: pictures[wordObj.word], word: wordObj.word});
            });
            
            const shuffledCards = shuffleArray(cards);
            
            shuffledCards.forEach((cardData, index) => {
                const card = document.createElement('button');
                card.className = 'card';
                card.textContent = '?';
                card.dataset.type = cardData.type;
                card.dataset.word = cardData.word || cardData.content;
                card.dataset.content = cardData.content;
                card.dataset.index = index;
                card.onclick = () => flipPictureCard(card, index);
                container.appendChild(card);
            });
        }

        function flipPictureCard(card, index) {
            if (flippedCards.length < 2 && !card.classList.contains('flipped') && !card.classList.contains('matched')) {
                card.classList.add('flipped');
                card.textContent = card.dataset.type === 'word' ? card.dataset.content.toUpperCase() : card.dataset.content;
                flippedCards.push({element: card, word: card.dataset.word, type: card.dataset.type});
                
                if (flippedCards.length === 2) {
                    setTimeout(checkPictureMatch, 600);
                }
            }
        }

        function checkPictureMatch() {
            const [card1, card2] = flippedCards;
            if (card1.word === card2.word && card1.type !== card2.type) {
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                matchedPairs++;
                updatePictureProgress();
                
                if (matchedPairs === 6) {
                    setTimeout(() => showCelebration('Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ ÏôÑÎ£å!', 5), 500);
                }
            } else {
                setTimeout(() => {
                    card1.element.classList.remove('flipped');
                    card2.element.classList.remove('flipped');
                    card1.element.textContent = '?';
                    card2.element.textContent = '?';
                }, 1200);
            }
            flippedCards = [];
        }

        function updatePictureProgress() {
            document.getElementById('pictureProgress').textContent = `${matchedPairs}/6`;
        }

        function startFillBlankGame() {
            currentGame = 'fillblank';
            fillBlankWords = getRandomWords(5);
            currentQuestion = 0;
            
            document.getElementById('mainScreen').classList.add('hidden');
            document.getElementById('gameArea').classList.remove('hidden');
            hideAllGames();
            document.getElementById('fillBlankGame').classList.remove('hidden');
            
            showNextQuestion();
        }

        function showNextQuestion() {
            if (currentQuestion >= 5) {
                showCelebration('ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ ÏôÑÎ£å!', 5);
                return;
            }
            
            const wordObj = fillBlankWords[currentQuestion];
            currentWord = wordObj.word;
            currentAnswer = '';
            
            document.getElementById('questionNumber').textContent = currentQuestion + 1;
            document.getElementById('questionText').textContent = `"${wordObj.meaning}"Ïùò ÏòÅÏñ¥ Îã®Ïñ¥Îäî?`;
            
            const blanks = currentWord.split('').map((letter, index) => 
                index === 0 || index === currentWord.length - 1 ? letter.toUpperCase() : '_'
            ).join(' ');
            document.getElementById('wordDisplay').textContent = blanks;
            
            setupLetterButtons();
        }

        function setupLetterButtons() {
            const container = document.getElementById('lettersGrid');
            container.innerHTML = '';
            
            const correctLetters = currentWord.split('').slice(1, -1);
            const wrongLetters = ['A', 'E', 'I', 'O', 'U', 'B', 'C', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'X', 'Y', 'Z'];
            
            const letters = [...correctLetters.map(l => l.toUpperCase())];
            while (letters.length < 8) {
                const randomLetter = wrongLetters[Math.floor(Math.random() * wrongLetters.length)];
                if (!letters.includes(randomLetter)) {
                    letters.push(randomLetter);
                }
            }
            
            const shuffledLetters = shuffleArray(letters);
            
            shuffledLetters.forEach(letter => {
                const button = document.createElement('button');
                button.className = 'letter-button';
                button.textContent = letter;
                button.onclick = () => selectLetter(letter, button);
                container.appendChild(button);
            });
        }

        function selectLetter(letter, button) {
            const correctLetters = currentWord.split('').slice(1, -1).map(l => l.toUpperCase());
            
            if (correctLetters.includes(letter)) {
                button.disabled = true;
                button.style.background = '#4CAF50';
                button.style.color = 'white';
                
                currentAnswer += letter;
                updateWordDisplay();
                
                if (currentAnswer.length === correctLetters.length) {
                    setTimeout(() => {
                        currentQuestion++;
                        showNextQuestion();
                    }, 1000);
                }
            } else {
                button.style.background = '#f44336';
                button.style.color = 'white';
                setTimeout(() => {
                    button.style.background = 'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)';
                    button.style.color = '#2c3e50';
                }, 1000);
            }
        }

        function updateWordDisplay() {
            const letters = currentWord.split('');
            const display = letters.map((letter, index) => {
                if (index === 0 || index === letters.length - 1) {
                    return letter.toUpperCase();
                } else {
                    const answerIndex = index - 1;
                    return answerIndex < currentAnswer.length ? currentAnswer[answerIndex] : '_';
                }
            }).join(' ');
            
            document.getElementById('wordDisplay').textContent = display;
        }

        function showCelebration(message, reward) {
            hideAllGames();
            document.getElementById('celebration').classList.remove('hidden');
            document.getElementById('celebrationText').textContent = message;
            document.getElementById('rewardText').textContent = `‚≠ê Ïä§Ìã∞Ïª§ ${reward}Í∞ú ÌöçÎìù! ‚≠ê`;
            
            stickers += reward;
            saveStickers();
            updateStickerDisplay();
        }

        function restartCurrentGame() {
            if (currentGame === 'memory') {
                startMemoryGame();
            } else if (currentGame === 'picture') {
                startPictureGame();
            } else if (currentGame === 'fillblank') {
                startFillBlankGame();
            }
        }

        function performDraw() {
            if (stickers >= 5) {
                stickers -= 5;
                saveStickers();
                updateStickerDisplay();
                
                const rewards = [
                    {icon: 'üìö', text: 'Ïû†Îì§Í∏∞ Ï†Ñ Ï±Ö Ìïú Í∂å Ï∂îÍ∞Ä!', chance: 35},
                    {icon: 'üç™', text: 'ÎßõÏûàÎäî Í∞ÑÏãù ÏãúÍ∞Ñ!', chance: 35},
                    {icon: 'ü§ó', text: 'ÏóÑÎßàÎûë ÏéÑÏéÑÏéÑ ÎÜÄÏù¥!', chance: 14},
                    {icon: 'üêé', text: 'ÏïÑÎπ† ÎßêÌÉÄÍ∏∞ ÎÜÄÏù¥!', chance: 15},
                    {icon: 'üß∏', text: 'Ïû≠Ìåü! ÏõêÌïòÎäî Ïû•ÎÇúÍ∞ê ÌïòÎÇò!', chance: 0.5}
                ];
                
                const random = Math.random() * 100;
                let cumulative = 0;
                let selectedReward = rewards[0];
                
                for (const reward of rewards) {
                    cumulative += reward.chance;
                    if (random <= cumulative) {
                        selectedReward = reward;
                        break;
                    }
                }
                
                // ÌåùÏóÖ ÌëúÏãú
                document.getElementById('rewardIcon').textContent = selectedReward.icon;
                document.getElementById('rewardDescription').textContent = selectedReward.text;
                document.getElementById('drawPopup').classList.remove('hidden');
            }
        }

        function closeDrawPopup() {
            document.getElementById('drawPopup').classList.add('hidden');
        }

        // ÌåùÏóÖ Î∞∞Í≤Ω ÌÅ¥Î¶≠Ïãú Îã´Í∏∞
        document.getElementById('drawPopup').addEventListener('click', function(e) {
            if (e.target === this) {
                closeDrawPopup();
            }
        });

        // Initialize
        displayWords();
        updateStickerDisplay();
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDmBEvEe%2FMy92OluHBf8E2%2FTVKFFfeq0HFveFzpwxHrK0XOLCN3qHgFsAdyX9kUHCspIkJDeLBp%2BXqOZ85MtRrqawV7qWx1OHQo%2FPfgUDJvc33e0AWKBac6Pwz1l2LwVPYLKzKd2izHBl3G5%2FVB2f2qgaPU5HDz%2FUlEH85CQXFG6D4pfQWYQWM%2Bp8JX6qR%2FCqrbjeAGnFmlqSLslGBbOhmmOVf%2BWa%2FqZiRi34u61oeVcRmb4krDr6ctVSpGkak61jJrtKXdaDn4YC9eYQb1fOTn8HbC43SZAUK0x4PTe%2Fpn3q9QrLiil6tQtjv95mRE4ygPq1Gd41JDYiUhUZwlBCb0B74rVx6NqV689M0kQe8VuLaWH38fCULqaZaCTZH8qjLMYJpqYfakgAFaUCu3PkBoNaNy6CKOmrZFXTU3i1zpjiEI5u3E6Py27bT%2BvqX9TUGD9xW1I5u8vGR%2BSkFxl4oLhq5TTjWBlGkwMtV06P%2B6vZfHeMKVxKYAicsOgMaZJKNw%3D%3D";
        window.__genspark_locale = "ko-KR";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDmBEvEe/My92OluHBf8E2/TVKFFfeq0HFveFzpwxHrK0XOLCN3qHgFsAdyX9kUHCspIkJDeLBp+XqOZ85MtRrqawV7qWx1OHQo/PfgUDJvc33e0AWKBac6Pwz1l2LwVPYLKzKd2izHBl3G5/VB2f2qgaPU5HDz/UlEH85CQXFG6D4pfQWYQWM+p8JX6qR/CqrbjeAGnFmlqSLslGBbOhmmOVf+Wa/qZiRi34u61oeVcRmb4krDr6ctVSpGkak61jJrtKXdaDn4YC9eYQb1fOTn8HbC43SZAUK0x4PTe/pn3q9QrLiil6tQtjv95mRE4ygPq1Gd41JDYiUhUZwlBCb0B74rVx6NqV689M0kQe8VuLaWH38fCULqaZaCTZH8qjLMYJpqYfakgAFaUCu3PkBoNaNy6CKOmrZFXTU3i1zpjiEI5u3E6Py27bT+vqX9TUGD9xW1I5u8vGR+SkFxl4oLhq5TTjWBlGkwMtV06P+6vZfHeMKVxKYAicsOgMaZJKNw==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
