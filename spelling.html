<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåü Ïä§Ìé†ÎßÅ ÎßàÏä§ÌÑ∞ Í≤åÏûÑ</title>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Quicksand', 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        .sparkles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .sparkle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: white;
            border-radius: 50%;
            animation: sparkle 3s infinite;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 1; transform: scale(1); }
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #8B5CF6;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .status-bar {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .status-item {
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .menu-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-button {
            background: linear-gradient(135deg, #8B5CF6, #A78BFA);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 20px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
        }

        .menu-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(139, 92, 246, 0.4);
        }

        .word-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .word-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .word-english {
            font-size: 1.1rem;
            font-weight: 600;
            color: #8B5CF6;
            margin-bottom: 5px;
        }

        .word-korean {
            font-size: 0.9rem;
            color: #666;
        }

        .game-screen {
            display: none;
        }

        .game-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 15px;
            padding: 10px 15px;
            cursor: pointer;
            font-weight: 600;
            color: #8B5CF6;
        }

        .cards-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        .card {
            aspect-ratio: 3/4;
            background: linear-gradient(135deg, #6366F1, #8B5CF6);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: scale(1.05);
        }

        .card.flipped {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            color: #333;
            border: 2px solid #8B5CF6;
        }

        .card.matched {
            background: linear-gradient(135deg, #4CAF50, #66BB6A);
            border: 3px solid #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            color: white;
        }

        .fill-blank-container {
            text-align: center;
            max-width: 500px;
            margin: 0 auto;
        }

        .question {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #8B5CF6;
            font-weight: 600;
        }

        .word-display {
            font-size: 2rem;
            margin-bottom: 30px;
            color: #333;
            font-weight: 700;
        }

        .letters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(60px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }

        .letter-button {
            padding: 15px;
            font-size: 1.3rem;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #8B5CF6, #A78BFA);
            color: white;
        }

        .letter-button:hover {
            transform: scale(1.1);
        }

        .letter-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .draw-container {
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            margin: 20px 0;
        }

        .draw-button {
            background: linear-gradient(135deg, #F59E0B, #F97316);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .draw-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .draw-result {
            margin-top: 20px;
            font-size: 1.5rem;
            font-weight: 600;
            color: #8B5CF6;
        }

        .game-complete {
            text-align: center;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin: 20px 0;
        }

        .game-complete h3 {
            color: #8B5CF6;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .restart-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .restart-button {
            background: linear-gradient(135deg, #10B981, #34D399);
            color: white;
            border: none;
            border-radius: 15px;
            padding: 12px 20px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .restart-button:hover {
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .cards-container {
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
            }
            
            .card {
                font-size: 1rem;
            }
            
            .title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="sparkles" id="sparkles"></div>
    
    <div class="container">
        <!-- Î©îÏù∏ ÌôîÎ©¥ -->
        <div id="main-screen">
            <div class="header">
                <h1 class="title">üåü Ïä§Ìé†ÎßÅ ÎßàÏä§ÌÑ∞ Í≤åÏûÑ</h1>
                <div class="status-bar">
                    <div class="status-item">‚≠ê Ïä§Ìã∞Ïª§: <span id="sticker-count">0</span>Í∞ú</div>
                    <button class="status-item draw-button" id="main-draw-btn" onclick="performDraw()" disabled>
                        üé∞ ÎΩëÍ∏∞ (5Í∞ú)
                    </button>
                </div>
            </div>

            <div class="menu-container">
                <button class="menu-button" onclick="startMemoryGame()">
                    üé¥ Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ<br><small>ÏòÅÏñ¥ ‚Üî ÏòÅÏñ¥</small>
                </button>
                <button class="menu-button" onclick="startPictureGame()">
                    üñºÔ∏è Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ<br><small>ÏòÅÏñ¥ ‚Üî Í∑∏Î¶º</small>
                </button>
                <button class="menu-button" onclick="startFillBlank()">
                    ‚úèÔ∏è ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞<br><small>ÌïúÍ∏Ä Îúª ‚Üí ÏòÅÏñ¥</small>
                </button>
            </div>

            <div class="word-grid" id="word-list"></div>

            <div class="draw-container">
                <div class="draw-result" id="draw-result"></div>
            </div>
        </div>

        <!-- Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ -->
        <div id="memory-game-screen" class="game-screen">
            <button class="back-button" onclick="goToMain()">‚Üê ÎèåÏïÑÍ∞ÄÍ∏∞</button>
            <div class="game-header">
                <h2>üé¥ Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ</h2>
                <p>Îß§Ïπ≠: <span id="memory-matches">0</span>/6</p>
            </div>
            <div class="cards-container" id="memory-cards"></div>
            <div id="memory-complete" class="game-complete" style="display: none;">
                <h3>üéâ Ï∂ïÌïòÌï©ÎãàÎã§! üéâ</h3>
                <p>Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ ÏôÑÎ£å!</p>
                <p>‚≠ê Ïä§Ìã∞Ïª§ 3Í∞ú ÌöçÎìù! ‚≠ê</p>
                <div class="restart-buttons">
                    <button class="restart-button" onclick="startMemoryGame()">üîÑ Îã§Ïãú ÏãúÏûë</button>
                    <button class="restart-button" onclick="goToMain()">üè† Î©îÎâ¥Î°ú</button>
                </div>
            </div>
        </div>

        <!-- Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ -->
        <div id="picture-game-screen" class="game-screen">
            <button class="back-button" onclick="goToMain()">‚Üê ÎèåÏïÑÍ∞ÄÍ∏∞</button>
            <div class="game-header">
                <h2>üñºÔ∏è Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ</h2>
                <p>Îß§Ïπ≠: <span id="picture-matches">0</span>/6</p>
            </div>
            <div class="cards-container" id="picture-cards"></div>
            <div id="picture-complete" class="game-complete" style="display: none;">
                <h3>üéâ Ï∂ïÌïòÌï©ÎãàÎã§! üéâ</h3>
                <p>Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ ÏôÑÎ£å!</p>
                <p>‚≠ê Ïä§Ìã∞Ïª§ 5Í∞ú ÌöçÎìù! ‚≠ê</p>
                <div class="restart-buttons">
                    <button class="restart-button" onclick="startPictureGame()">üîÑ Îã§Ïãú ÏãúÏûë</button>
                    <button class="restart-button" onclick="goToMain()">üè† Î©îÎâ¥Î°ú</button>
                </div>
            </div>
        </div>

        <!-- ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ Í≤åÏûÑ -->
        <div id="fill-blank-screen" class="game-screen">
            <button class="back-button" onclick="goToMain()">‚Üê ÎèåÏïÑÍ∞ÄÍ∏∞</button>
            <div class="game-header">
                <h2>‚úèÔ∏è ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞</h2>
                <p>Î¨∏Ï†ú: <span id="question-number">1</span>/5</p>
            </div>
            <div class="fill-blank-container">
                <div class="question" id="korean-meaning"></div>
                <div class="word-display" id="word-with-blank"></div>
                <div class="letters-grid" id="letter-options"></div>
            </div>
            <div id="fill-complete" class="game-complete" style="display: none;">
                <h3>üéâ Ï∂ïÌïòÌï©ÎãàÎã§! üéâ</h3>
                <p>ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ ÏôÑÎ£å!</p>
                <p>‚≠ê Ïä§Ìã∞Ïª§ 5Í∞ú ÌöçÎìù! ‚≠ê</p>
                <div class="restart-buttons">
                    <button class="restart-button" onclick="startFillBlank()">üîÑ Îã§Ïãú ÏãúÏûë</button>
                    <button class="restart-button" onclick="goToMain()">üè† Î©îÎâ¥Î°ú</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ï†ÑÏ≤¥ 50Í∞ú Îã®Ïñ¥ Î™©Î°ù
        const allWords = [
            {eng: 'dig', kor: 'ÌååÎã§', pic: '‚õèÔ∏è'},
            {eng: 'hot', kor: 'Îú®Í±∞Ïö¥', pic: 'üî•'},
            {eng: 'jam', kor: 'Ïûº', pic: 'üçá'},
            {eng: 'kid', kor: 'ÏïÑÏù¥', pic: 'üë∂'},
            {eng: 'leg', kor: 'Îã§Î¶¨', pic: 'ü¶µ'},
            {eng: 'map', kor: 'ÏßÄÎèÑ', pic: 'üó∫Ô∏è'},
            {eng: 'nut', kor: 'Í≤¨Í≥ºÎ•ò', pic: 'ü•ú'},
            {eng: 'red', kor: 'Îπ®Í∞ÑÏÉâ', pic: 'üî¥'},
            {eng: 'six', kor: 'Ïó¨ÏÑØ', pic: '6Ô∏è‚É£'},
            {eng: 'top', kor: 'Îß® ÏúÑ', pic: '‚¨ÜÔ∏è'},
            {eng: 'tub', kor: 'ÏöïÏ°∞', pic: 'üõÅ'},
            {eng: 'wet', kor: 'Ï†ñÏùÄ', pic: 'üíß'},
            {eng: 'bake', kor: 'ÍµΩÎã§', pic: 'üçû'},
            {eng: 'cone', kor: 'ÏõêÎøî', pic: 'üç¶'},
            {eng: 'cute', kor: 'Í∑ÄÏó¨Ïö¥', pic: 'ü•∞'},
            {eng: 'five', kor: 'Îã§ÏÑØ', pic: '5Ô∏è‚É£'},
            {eng: 'game', kor: 'Í≤åÏûÑ', pic: 'üéÆ'},
            {eng: 'home', kor: 'Ïßë', pic: 'üè†'},
            {eng: 'mule', kor: 'ÎÖ∏ÏÉà', pic: 'üê¥'},
            {eng: 'ride', kor: 'ÌÉÄÎã§', pic: 'üö≤'},
            {eng: 'rose', kor: 'Ïû•ÎØ∏', pic: 'üåπ'},
            {eng: 'time', kor: 'ÏãúÍ∞Ñ', pic: '‚è∞'},
            {eng: 'tube', kor: 'Í¥Ä', pic: 'üîß'},
            {eng: 'wave', kor: 'ÌååÎèÑ', pic: 'üåä'},
            {eng: 'blade', kor: 'ÏπºÎÇ†', pic: 'üî™'},
            {eng: 'brave', kor: 'Ïö©Í∞êÌïú', pic: 'ü¶Å'},
            {eng: 'drive', kor: 'Ïö¥Ï†ÑÌïòÎã§', pic: 'üöó'},
            {eng: 'flute', kor: 'ÌîåÎ£®Ìä∏', pic: 'üéµ'},
            {eng: 'grape', kor: 'Ìè¨ÎèÑ', pic: 'üçá'},
            {eng: 'plane', kor: 'ÎπÑÌñâÍ∏∞', pic: '‚úàÔ∏è'},
            {eng: 'price', kor: 'Í∞ÄÍ≤©', pic: 'üí∞'},
            {eng: 'skate', kor: 'Ïä§ÏºÄÏù¥Ìä∏', pic: '‚õ∏Ô∏è'},
            {eng: 'slide', kor: 'ÎØ∏ÎÅÑÎüºÌãÄ', pic: 'üõù'},
            {eng: 'smile', kor: 'ÏõÉÎã§', pic: 'üòä'},
            {eng: 'snake', kor: 'Î±Ä', pic: 'üêç'},
            {eng: 'space', kor: 'Ïö∞Ï£º', pic: 'üöÄ'},
            {eng: 'happy', kor: 'ÌñâÎ≥µÌïú', pic: 'üòä'},
            {eng: 'robot', kor: 'Î°úÎ¥á', pic: 'ü§ñ'},
            {eng: 'funny', kor: 'Ïû¨ÎØ∏ÏûàÎäî', pic: 'üòÇ'},
            {eng: 'horse', kor: 'Îßê', pic: 'üêé'},
            {eng: 'again', kor: 'Îã§Ïãú', pic: 'üîÑ'},
            {eng: 'color', kor: 'ÏÉâÍπî', pic: 'üåà'},
            {eng: 'quiet', kor: 'Ï°∞Ïö©Ìïú', pic: 'ü§´'},
            {eng: 'pizza', kor: 'ÌîºÏûê', pic: 'üçï'},
            {eng: 'short', kor: 'ÏßßÏùÄ', pic: 'üìè'},
            {eng: 'water', kor: 'Î¨º', pic: 'üíß'},
            {eng: 'bread', kor: 'Îπµ', pic: 'üçû'},
            {eng: 'share', kor: 'ÎÇòÎàÑÎã§', pic: 'ü§ù'},
            {eng: 'cherry', kor: 'Ï≤¥Î¶¨', pic: 'üçí'},
            {eng: 'flower', kor: 'ÍΩÉ', pic: 'üå∏'},
            {eng: 'friend', kor: 'ÏπúÍµ¨', pic: 'üë´'},
            {eng: 'little', kor: 'ÏûëÏùÄ', pic: 'üê≠'},
            {eng: 'parent', kor: 'Î∂ÄÎ™®', pic: 'üë®‚Äçüë©‚Äçüëß'},
            {eng: 'purple', kor: 'Î≥¥ÎùºÏÉâ', pic: 'üü£'},
            {eng: 'yellow', kor: 'ÎÖ∏ÎûÄÏÉâ', pic: 'üü°'}
        ];

        // Í≤åÏûÑ ÏÉÅÌÉú
        let stickers = parseInt(localStorage.getItem('stickers') || '0');
        let flippedCards = [];
        let memoryMatches = 0;
        let pictureMatches = 0;
        let currentQuestion = 0;
        let fillBlankQuestions = [];
        let currentGameWords = [];

        // ÏôÑÏ†Ñ ÎûúÎç§ ÏÖîÌîå Ìï®Ïàò
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // ÎûúÎç§ Îã®Ïñ¥ ÏÑ†ÌÉù
        function getRandomWords(count) {
            const shuffled = shuffleArray(allWords);
            return shuffled.slice(0, count);
        }

        // Ï¥àÍ∏∞Ìôî
        function init() {
            createSparkles();
            displayWordList();
            updateUI();
        }

        // Î∞òÏßùÏù¥ Ìö®Í≥º
        function createSparkles() {
            const sparklesContainer = document.getElementById('sparkles');
            for (let i = 0; i < 15; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 3 + 's';
                sparklesContainer.appendChild(sparkle);
            }
        }

        // Îã®Ïñ¥ Î™©Î°ù ÌëúÏãú
        function displayWordList() {
            const wordList = document.getElementById('word-list');
            wordList.innerHTML = '';
            
            const shuffled = shuffleArray(allWords);
            shuffled.forEach(word => {
                const wordCard = document.createElement('div');
                wordCard.className = 'word-card';
                wordCard.innerHTML = `
                    <div class="word-english">${word.eng.toUpperCase()}</div>
                    <div class="word-korean">${word.kor}</div>
                `;
                wordList.appendChild(wordCard);
            });
        }

        // UI ÏóÖÎç∞Ïù¥Ìä∏
        function updateUI() {
            document.getElementById('sticker-count').textContent = stickers;
            const drawButton = document.getElementById('main-draw-btn');
            
            if (stickers >= 5) {
                drawButton.disabled = false;
                drawButton.style.opacity = '1';
            } else {
                drawButton.disabled = true;
                drawButton.style.opacity = '0.5';
            }
            
            localStorage.setItem('stickers', stickers.toString());
        }

        // ÌôîÎ©¥ Ï†ÑÌôò
        function showScreen(screenId) {
            document.querySelectorAll('.container > div').forEach(div => {
                div.style.display = 'none';
            });
            document.getElementById(screenId).style.display = 'block';
        }

        function goToMain() {
            showScreen('main-screen');
        }

        // Î©îÎ™®Î¶¨ Ïπ¥Îìú Í≤åÏûÑ
        function startMemoryGame() {
            showScreen('memory-game-screen');
            setupMemoryGame();
        }

        function setupMemoryGame() {
            currentGameWords = getRandomWords(6);
            const cards = [];
            
            // Í∞Å Îã®Ïñ¥Î•º 2Ïû•Ïî© Ï∂îÍ∞Ä
            currentGameWords.forEach(word => {
                cards.push({type: 'word', content: word.eng.toUpperCase(), word: word});
                cards.push({type: 'word', content: word.eng.toUpperCase(), word: word});
            });
            
            const shuffledCards = shuffleArray(cards);
            const container = document.getElementById('memory-cards');
            container.innerHTML = '';
            
            shuffledCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.innerHTML = '?';
                cardElement.onclick = () => flipMemoryCard(cardElement, card, index);
                container.appendChild(cardElement);
            });
            
            flippedCards = [];
            memoryMatches = 0;
            document.getElementById('memory-matches').textContent = '0';
            document.getElementById('memory-complete').style.display = 'none';
        }

        function flipMemoryCard(cardElement, cardData, cardIndex) {
            if (flippedCards.length < 2 && !cardElement.classList.contains('flipped') && !cardElement.classList.contains('matched')) {
                cardElement.classList.add('flipped');
                cardElement.innerHTML = cardData.content;
                flippedCards.push({element: cardElement, data: cardData, index: cardIndex});
                
                if (flippedCards.length === 2) {
                    setTimeout(checkMemoryMatch, 600);
                }
            }
        }

        function checkMemoryMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.data.content === card2.data.content) {
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                memoryMatches++;
                document.getElementById('memory-matches').textContent = memoryMatches;
                
                if (memoryMatches === 6) {
                    setTimeout(() => {
                        stickers += 3;
                        updateUI();
                        document.getElementById('memory-complete').style.display = 'block';
                    }, 500);
                }
            } else {
                setTimeout(() => {
                    card1.element.classList.remove('flipped');
                    card2.element.classList.remove('flipped');
                    card1.element.innerHTML = '?';
                    card2.element.innerHTML = '?';
                }, 1200);
            }
            
            flippedCards = [];
        }

        // Í∑∏Î¶º Îß§Ïπ≠ Í≤åÏûÑ
        function startPictureGame() {
            showScreen('picture-game-screen');
            setupPictureGame();
        }

        function setupPictureGame() {
            currentGameWords = getRandomWords(6);
            const cards = [];
            
            currentGameWords.forEach(word => {
                cards.push({type: 'word', content: word.eng.toUpperCase(), word: word});
                cards.push({type: 'picture', content: word.pic, word: word});
            });
            
            const shuffledCards = shuffleArray(cards);
            const container = document.getElementById('picture-cards');
            container.innerHTML = '';
            
            shuffledCards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'card';
                cardElement.innerHTML = '?';
                cardElement.onclick = () => flipPictureCard(cardElement, card, index);
                container.appendChild(cardElement);
            });
            
            flippedCards = [];
            pictureMatches = 0;
            document.getElementById('picture-matches').textContent = '0';
            document.getElementById('picture-complete').style.display = 'none';
        }

        function flipPictureCard(cardElement, cardData, cardIndex) {
            if (flippedCards.length < 2 && !cardElement.classList.contains('flipped') && !cardElement.classList.contains('matched')) {
                cardElement.classList.add('flipped');
                cardElement.innerHTML = cardData.content;
                flippedCards.push({element: cardElement, data: cardData, index: cardIndex});
                
                if (flippedCards.length === 2) {
                    setTimeout(checkPictureMatch, 600);
                }
            }
        }

        function checkPictureMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.data.word.eng === card2.data.word.eng) {
                card1.element.classList.add('matched');
                card2.element.classList.add('matched');
                pictureMatches++;
                document.getElementById('picture-matches').textContent = pictureMatches;
                
                if (pictureMatches === 6) {
                    setTimeout(() => {
                        stickers += 5;
                        updateUI();
                        document.getElementById('picture-complete').style.display = 'block';
                    }, 500);
                }
            } else {
                setTimeout(() => {
                    card1.element.classList.remove('flipped');
                    card2.element.classList.remove('flipped');
                    card1.element.innerHTML = '?';
                    card2.element.innerHTML = '?';
                }, 1200);
            }
            
            flippedCards = [];
        }

        // ÎπàÏπ∏ Ï±ÑÏö∞Í∏∞ Í≤åÏûÑ
        function startFillBlank() {
            showScreen('fill-blank-screen');
            setupFillBlank();
        }

        function setupFillBlank() {
            fillBlankQuestions = getRandomWords(5);
            currentQuestion = 0;
            document.getElementById('fill-complete').style.display = 'none';
            showFillBlankQuestion();
        }

        function showFillBlankQuestion() {
            if (currentQuestion >= fillBlankQuestions.length) {
                stickers += 5;
                updateUI();
                document.getElementById('fill-complete').style.display = 'block';
                return;
            }

            const word = fillBlankQuestions[currentQuestion];
            const blankPos = Math.floor(Math.random() * word.eng.length);
            const wordWithBlank = word.eng.toUpperCase().split('').map((letter, index) => 
                index === blankPos ? '_' : letter
            ).join('');
            
            document.getElementById('question-number').textContent = currentQuestion + 1;
            document.getElementById('korean-meaning').textContent = word.kor;
            document.getElementById('word-with-blank').textContent = wordWithBlank;
            
            const correctLetter = word.eng.toUpperCase()[blankPos];
            const wrongLetters = ['A', 'E', 'I', 'O', 'U', 'B', 'C', 'D', 'F', 'G', 'H', 'J', 'K', 'L', 'M', 'N', 'P', 'Q', 'R', 'S', 'T', 'V', 'W', 'X', 'Y', 'Z']
                .filter(letter => letter !== correctLetter);
            
            const options = [correctLetter, ...shuffleArray(wrongLetters).slice(0, 5)];
            const shuffledOptions = shuffleArray(options);
            
            const container = document.getElementById('letter-options');
            container.innerHTML = '';
            
            shuffledOptions.forEach(letter => {
                const button = document.createElement('button');
                button.className = 'letter-button';
                button.textContent = letter;
                button.onclick = () => selectLetter(letter, correctLetter, blankPos, word.eng.toUpperCase());
                container.appendChild(button);
            });
        }

        function selectLetter(selectedLetter, correctLetter, blankPos, correctWord) {
            if (selectedLetter === correctLetter) {
                document.getElementById('word-with-blank').textContent = correctWord;
                setTimeout(() => {
                    currentQuestion++;
                    showFillBlankQuestion();
                }, 1500);
            } else {
                // ÌãÄÎ¶∞ Îãµ Ï≤òÎ¶¨
                event.target.style.background = '#ef4444';
                setTimeout(() => {
                    event.target.style.background = 'linear-gradient(135deg, #8B5CF6, #A78BFA)';
                }, 500);
            }
        }

        // ÎΩëÍ∏∞ ÏãúÏä§ÌÖú
        function performDraw() {
            if (stickers < 5) return;
            
            stickers -= 5;
            updateUI();
            
            const rewards = [
                {name: 'üìö Ïû†Îì§Í∏∞ Ï†Ñ Ï±Ö Ìïú Í∂å Ï∂îÍ∞Ä', probability: 35},
                {name: 'üç™ Í∞ÑÏãù', probability: 35},
                {name: 'ü§ó ÏóÑÎßàÎûë ÏéÑÏéÑÏéÑ', probability: 14},
                {name: 'üêé ÏïÑÎπ† ÎßêÌÉÄÍ∏∞ ÎÜÄÏù¥', probability: 15},
                {name: 'üß∏ Ïû•ÎÇúÍ∞ê ÏÇ¨Ï£ºÍ∏∞', probability: 0.5}
            ];
            
            const random = Math.random() * 100;
            let currentProbability = 0;
            let selectedReward = rewards[rewards.length - 1];
            
            for (const reward of rewards) {
                currentProbability += reward.probability;
                if (random <= currentProbability) {
                    selectedReward = reward;
                    break;
                }
            }
            
            const resultElement = document.getElementById('draw-result');
            resultElement.innerHTML = `
                <div style="animation: bounce 1s ease-in-out;">
                    üéâ ${selectedReward.name} üéâ
                </div>
            `;
            
            setTimeout(() => {
                resultElement.innerHTML = '';
            }, 5000);
        }

        // Î∞îÏö¥Ïä§ Ïï†ÎãàÎ©îÏù¥ÏÖò Ï∂îÍ∞Ä
        const bounceStyle = document.createElement('style');
        bounceStyle.textContent = `
            @keyframes bounce {
                0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
                40% { transform: translateY(-30px); }
                60% { transform: translateY(-15px); }
            }
        `;
        document.head.appendChild(bounceStyle);

        // Ï¥àÍ∏∞Ìôî Ïã§Ìñâ
        init();
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDu%2FS%2F79Gqn9YRuH9pKd1HsWpOR0Qxf6YTcmk7Ac1WK8Pl84uTx8KE54ErLdTrbPxLjg76EhmZYHZpLI%2Fqc06sKlTZIjoT5B6oxM1UR1Q1w0I%2BYXOPdlUJ7ao9fra86EAPZc54PjVsGn7B2GO79ZhS3PTj8GnKEpnqUvvtX4rSzO3gX9cCu4MTZMyZUFSkZok9Xhw8unCtPxg88LPGYt3Xky%2B9EU1aljJ84TefB7TPxIg2w%2FoZ%2BNwkwq38PYS6yPM%2Bprd87D1ILOV%2BA6gZDEk9o7ryyt6oEoNjzh9yWSfPkrqAOfh8uGyWWdD0KWyKoFgVZJozrXuOhsT0t8U9hBsFCsXU3mfIxHIJpsvrNr8wzl4bTE7hM2PZp6ZaT%2BGZUf26avjEE2%2BANjyrfARZsiWAIsrsJFDm48GKCM27Zyt9YfZDfZF0oo2VGqE6OY73Kaua%2B0soxxTvUD0w24D8UGdn%2FMpQm5JKbM7ZWtKPTbdBtc%2BroJc04OcvE%2B%2B41s7%2FRJH40FIEDsM%2FLVm3IvGYfttM5g%3D";
        window.__genspark_locale = "ko-KR";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDu/S/79Gqn9YRuH9pKd1HsWpOR0Qxf6YTcmk7Ac1WK8Pl84uTx8KE54ErLdTrbPxLjg76EhmZYHZpLI/qc06sKlTZIjoT5B6oxM1UR1Q1w0I+YXOPdlUJ7ao9fra86EAPZc54PjVsGn7B2GO79ZhS3PTj8GnKEpnqUvvtX4rSzO3gX9cCu4MTZMyZUFSkZok9Xhw8unCtPxg88LPGYt3Xky+9EU1aljJ84TefB7TPxIg2w/oZ+Nwkwq38PYS6yPM+prd87D1ILOV+A6gZDEk9o7ryyt6oEoNjzh9yWSfPkrqAOfh8uGyWWdD0KWyKoFgVZJozrXuOhsT0t8U9hBsFCsXU3mfIxHIJpsvrNr8wzl4bTE7hM2PZp6ZaT+GZUf26avjEE2+ANjyrfARZsiWAIsrsJFDm48GKCM27Zyt9YfZDfZF0oo2VGqE6OY73Kaua+0soxxTvUD0w24D8UGdn/MpQm5JKbM7ZWtKPTbdBtc+roJc04OcvE++41s7/RJH40FIEDsM/LVm3IvGYfttM5g=";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
    
